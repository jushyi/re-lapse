---
phase: 46-performance-optimization
plan: 07
type: execute
---

<objective>
Verify all performance optimizations from Plans 46-01 through 46-06 build successfully and pass visual/functional testing across all app screens.

Purpose: Confirm no regressions were introduced by the optimization work and that the app feels fast and responsive across all screens.
Output: Build verification, visual testing confirmation, updated PERFORMANCE.md documentation.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/phase-prompt.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/46-performance-optimization/46-RESEARCH.md
@.planning/phases/46-performance-optimization/46-CONTEXT.md
@.planning/codebase/PERFORMANCE.md

**Prior plan summaries (read at execution time):**
@.planning/phases/46-performance-optimization/46-01-SUMMARY.md
@.planning/phases/46-performance-optimization/46-02-SUMMARY.md
@.planning/phases/46-performance-optimization/46-03-SUMMARY.md
@.planning/phases/46-performance-optimization/46-04-SUMMARY.md
@.planning/phases/46-performance-optimization/46-05-SUMMARY.md
@.planning/phases/46-performance-optimization/46-06-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Build verification and lint check</name>
  <files>package.json, babel.config.js</files>
  <action>
Run the full build and lint pipeline to verify no errors were introduced:

1. `npx expo export --platform ios` — full iOS build
2. `npx eslint src/ --ext .js,.jsx` — lint check on all source files (if eslint configured)
3. `node -c functions/index.js` — syntax check on Cloud Functions

If any errors are found:

- Build errors: identify the file and fix (likely import/syntax issue from refactoring)
- Lint errors: fix lint violations introduced by the optimization changes
- Cloud Functions syntax errors: fix the specific line

After all checks pass, update `.planning/codebase/PERFORMANCE.md` with Phase 46 optimizations:

- Add a "Phase 46 Optimizations" section documenting what was done
- Update "Files Still Using RN Image" table (should now say "None — all migrated")
- Update "Files Already Using expo-image" list with newly migrated files
- Add notes about cacheKey, Cache-Control, React Compiler, Cloud Functions preferRest
- Add new composite indexes to documentation
  </action>
  <verify>
  All three commands pass without errors:
- Build: exit code 0
- Lint: no errors (warnings OK)
- Cloud Functions: syntax valid
- PERFORMANCE.md updated with Phase 46 section
  </verify>
  <done>Build passes, lint clean, Cloud Functions valid, documentation updated.</done>
  </task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete performance optimization across 6 plans: server-side feed filtering, Firestore indexes and query limits, expo-image migration with cacheKey, FlatList optimization props, React Compiler, and Cloud Functions preferRest + resource configs.</what-built>
  <how-to-verify>
    1. Run: `npx expo start` to launch the dev server
    2. Open the app on your device/simulator

    **Feed Screen:**
    3. Scroll the feed rapidly up and down — should be smooth with no jank
    4. Photos should load quickly with no visible blank placeholders lingering
    5. Pull to refresh — feed should reload fast

    **Stories:**
    6. Tap into stories — photos should load instantly (now using expo-image cache)
    7. Swipe through multiple stories — smooth transitions

    **Profile:**
    8. Navigate to your profile — photo, Selects banner, albums should load fast
    9. Scroll through albums — smooth scrolling

    **Friends:**
    10. Open Friends tab — friend list should render quickly
    11. Scroll through friend list — no jank
    12. Check suggestions and requests tabs

    **Notifications:**
    13. Open notifications — list should render quickly
    14. Scroll through notifications — smooth

    **Comments:**
    15. Open comments on any photo — list should render smoothly
    16. Scroll through comments

    **Overall:**
    17. Navigate between all tabs — no sluggishness
    18. Open and close modals — smooth transitions
    19. Nothing should feel slow or janky

  </how-to-verify>
  <resume-signal>Type "approved" to complete Phase 46, or describe any issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] `npx expo export --platform ios` succeeds
- [ ] Lint passes
- [ ] Cloud Functions syntax valid
- [ ] PERFORMANCE.md updated
- [ ] User approved all screens visually
- [ ] No performance regressions observed
</verification>

<success_criteria>

- All tasks completed
- Build passes without errors
- User approves visual/functional testing
- No regressions in any screen
- PERFORMANCE.md documentation updated
- Phase 46 complete
  </success_criteria>

<output>
After completion, create `.planning/phases/46-performance-optimization/46-07-SUMMARY.md`:

# Phase 46 Plan 07: Verification & Documentation Summary

**[One-liner summary]**

## Accomplishments

- Build verification passed
- All screens visually verified
- PERFORMANCE.md updated with Phase 46 work

## Files Created/Modified

- `.planning/codebase/PERFORMANCE.md` - Updated with Phase 46 optimizations

## Decisions Made

[Any decisions from verification]

## Issues Encountered

[Any issues found during verification]

## Next Step

Phase 46 complete, ready for Phase 47: Firebase Performance Monitoring
</output>
