---
phase: 06-selects-banner
plan: 06-02-FIX
type: fix
---

<objective>
Fix 1 UAT issue from plan 06-02.

Source: 06-02-ISSUES.md
Priority: 0 critical, 1 major, 0 minor
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-phase.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/ROADMAP.md

**Issues being fixed:**
@.planning/phases/06-selects-banner/06-02-ISSUES.md

**Original plan for reference:**
@.planning/phases/06-selects-banner/06-02-PLAN.md

**Component to fix:**
@src/components/SelectsEditOverlay.js
</context>

<tasks>

<task type="auto">
  <name>Fix UAT-001: Edit overlay header clipped on first open</name>
  <files>src/components/SelectsEditOverlay.js</files>
  <action>
The issue is that SafeAreaView with `edges` prop may not have safe area insets calculated correctly on first render after app launch. This is a known React Native issue.

**Fix approach:** Replace SafeAreaView edges-based padding with `useSafeAreaInsets` hook for explicit inset handling on the header.

1. Import `useSafeAreaInsets` from 'react-native-safe-area-context'

2. Get insets inside the component:

   ```js
   const insets = useSafeAreaInsets();
   ```

3. Apply top inset to header explicitly instead of relying on SafeAreaView edges:
   - Change `SafeAreaView style={styles.container} edges={['top', 'bottom']}` to just `View style={styles.container}`
   - Add `paddingTop: insets.top` to the header style inline or via a dynamic style
   - Add `paddingBottom: insets.bottom` to the buttonContainer style

4. This ensures insets are recalculated on each render and properly applied even on first open.

**Why this works:** The `useSafeAreaInsets` hook triggers a re-render when insets become available, ensuring the header is positioned correctly even on the first open after app launch.
</action>
<verify>

1. Force close app completely
2. Reopen app
3. Navigate to Profile
4. Tap Selects banner to open edit overlay
5. Verify header is properly positioned below notch/status bar on FIRST open
   </verify>
   <done>Header is correctly positioned on first open after fresh app launch.</done>
   </task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Fixed header clipping by using useSafeAreaInsets hook instead of SafeAreaView edges</what-built>
  <how-to-verify>
    1. Force close the app completely (swipe away from app switcher)
    2. Reopen the app
    3. Navigate to Profile tab
    4. Tap the Selects banner to open edit overlay
    5. Verify: Header ("Edit Highlights" text and X button) is properly positioned below the notch/status bar
    6. Verify: This works on the FIRST open, not just after navigation
    7. Test multiple times: close app, reopen, tap banner - header should always be correct
  </how-to-verify>
  <resume-signal>Type "approved" if header is always correctly positioned, or describe any remaining issues</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Header is properly positioned on first open after fresh app launch
- [ ] Header is properly positioned on subsequent opens
- [ ] No layout shift or flash when opening overlay
- [ ] All existing functionality still works (drag-reorder, delete, add, save)
</verification>

<success_criteria>

- UAT-001 is resolved
- Header never clips into status bar/notch area
- Ready for re-verification
  </success_criteria>

<output>
After completion, create `.planning/phases/06-selects-banner/06-02-FIX-SUMMARY.md`
</output>
