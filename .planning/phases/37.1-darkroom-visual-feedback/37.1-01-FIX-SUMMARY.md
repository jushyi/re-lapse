---
phase: 37.1-darkroom-visual-feedback
plan: 01-FIX
type: fix
---

# Phase 37.1 Plan 01-FIX: Gradient State Indicators Summary

**Fixed 2 UAT issues for radial gradient state indicators**

## Performance

- **Duration:** ~15 min (iterative tuning with user)
- **Started:** 2026-01-27
- **Completed:** 2026-01-27
- **Issues Fixed:** 2 (UAT-001, UAT-002)
- **Files Modified:** 2

## Issues Fixed

| Issue   | Description                             | Resolution                                      |
| ------- | --------------------------------------- | ----------------------------------------------- |
| UAT-001 | Developing gradient not purple-dominant | Radial gradient with purple center, white edges |
| UAT-002 | Ready state not distinguishable         | Radial gradient with pink center, white edges   |

## Implementation Details

### Approach Change: LinearGradient → RadialGradient

Original implementation used `expo-linear-gradient` which only supports directional gradients. User requested center-out "burst" effect, requiring switch to `react-native-svg` RadialGradient.

### Final Gradient Configuration

**Card Button (CameraScreen.js):**

```jsx
<RadialGradient cx="50%" cy="50%" rx="95%" ry="95%">
  <Stop offset="0%" stopColor={centerColor} />
  <Stop offset="40%" stopColor={centerColor} />
  <Stop offset="100%" stopColor="#FFFFFF" />
</RadialGradient>
```

**Colors:**

- Developing: Purple center (#7C3AED) → White edges
- Revealed: Pink center (#DB2777) → White edges

**Hold Button (DarkroomBottomSheet.js):**

- Same radial gradient pattern
- Pink center (#DB2777) → White edges (only shows when revealed)

### Iteration History

1. Initial: LinearGradient 50/50 split (rejected - states indistinguishable)
2. 3-stop LinearGradient (rejected - still linear, not center-out)
3. RadialGradient with opposite accent colors on edges (rejected)
4. RadialGradient with white edges at 70% radius (rejected - too much white)
5. RadialGradient with white edges at 85% radius (approved intermediate)
6. RadialGradient with white edges at 95% radius, 40% solid center (approved final)

## Files Modified

- `src/screens/CameraScreen.js` - RadialGradientCard component with SVG radial gradient
- `src/components/DarkroomBottomSheet.js` - RadialGradientButton component with SVG radial gradient

## Additional Fix: Storage Path

During UAT, discovered `[storage/unauthorized]` error for photo uploads. Fixed by updating storage path to include userId:

- `src/services/firebase/storageService.js` - Updated path to `photos/${userId}/${photoId}.jpg`
- `src/services/uploadQueueService.js` - Pass userId to uploadPhoto
- `src/services/firebase/photoService.js` - Pass userId to storage functions

## Verification

- [x] App builds without errors
- [x] Developing state shows purple center with white edge glow
- [x] Revealed state shows pink center with white edge glow
- [x] Two states clearly distinguishable at a glance
- [x] Hold button in bottom sheet uses matching radial gradient
- [x] Photo uploads working with corrected storage path

---

_Phase: 37.1-darkroom-visual-feedback_
_Plan: 01-FIX_
_Completed: 2026-01-27_
