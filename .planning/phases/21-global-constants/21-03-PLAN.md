---
phase: 21-global-constants
plan: 03
type: execute
---

<objective>
Update remaining screens and components to use design system constants.

Purpose: Complete the design system migration across all remaining source files.
Output: All screens and components using centralized constants, phase complete.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/21-global-constants/21-CONTEXT.md
@.planning/phases/21-global-constants/21-02-SUMMARY.md

**Tech stack available:** React Native, Expo, StyleSheet.create
**Constraint:** No visual changes - every replacement must use the exact equivalent value

**Remaining screens to update:**

- FriendsListScreen.js (40+ values)
- FriendRequestsScreen.js (20+ values)
- NotificationsScreen.js (25+ values)
- ProfileScreen.js, ProfileSetupScreen.js
- PhoneInputScreen.js, VerificationScreen.js
- UserSearchScreen.js, SuccessScreen.js

**Components to update:**

- DarkroomBottomSheet.js (has local COLORS - migrate)
- SwipeablePhotoCard.js (large file)
- PhotoDetailModal.js
- Button.js, Card.js, Input.js
- FeedPhotoCard.js, FriendRequestCard.js, UserSearchCard.js
- FeedLoadingSkeleton.js, ReactionDisplay.js
- FriendStoryCard.js, StoriesViewerModal.js
- AnimatedSplash.js, ErrorBoundary.js

**Constants available:**
@lapse-clone-app/src/constants/index.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update remaining screens with design constants</name>
  <files>lapse-clone-app/src/screens/FriendsListScreen.js, lapse-clone-app/src/screens/FriendRequestsScreen.js, lapse-clone-app/src/screens/NotificationsScreen.js, lapse-clone-app/src/screens/ProfileScreen.js, lapse-clone-app/src/screens/ProfileSetupScreen.js, lapse-clone-app/src/screens/PhoneInputScreen.js, lapse-clone-app/src/screens/VerificationScreen.js, lapse-clone-app/src/screens/UserSearchScreen.js, lapse-clone-app/src/screens/SuccessScreen.js</files>
  <action>
For each screen file, add import:
```javascript
import { colors, typography, spacing, layout } from '../constants';
```

Replace hardcoded values following the same patterns as Plan 02:

**Colors:** Map to colors._ (background, text, border, status, brand, system)
**Typography:** Map fontSize → typography.size._, fontWeight → typography.weight._
**Spacing:** Map padding/margin → spacing._
**Layout:** Map borderRadius → layout.borderRadius._, dimensions → layout.dimensions._

**Priority order (by file size/complexity):**

1. FriendsListScreen.js - 40+ values, complex layout
2. NotificationsScreen.js - 25+ values
3. FriendRequestsScreen.js - 20+ values
4. ProfileSetupScreen.js - Form styles
5. PhoneInputScreen.js, VerificationScreen.js - Auth flow styles
6. ProfileScreen.js - Profile display
7. UserSearchScreen.js - Search UI
8. SuccessScreen.js - Simple success state

**Critical:** Each screen must look identical after changes.
</action>
<verify>npm run lint passes, all screens launch correctly, visual spot check</verify>
<done>All 9 remaining screens use design constants</done>
</task>

<task type="auto">
  <name>Task 2: Update components with design constants</name>
  <files>lapse-clone-app/src/components/DarkroomBottomSheet.js, lapse-clone-app/src/components/SwipeablePhotoCard.js, lapse-clone-app/src/components/PhotoDetailModal.js, lapse-clone-app/src/components/Button.js, lapse-clone-app/src/components/Card.js, lapse-clone-app/src/components/Input.js</files>
  <action>
For each component, add import:
```javascript
import { colors, typography, spacing, layout } from '../constants';
```

**DarkroomBottomSheet.js (priority - has local COLORS):**

- Migrate local COLORS object to use centralized colors
- Remove local COLORS definition after migration
- Update all style references

**SwipeablePhotoCard.js (large file - 785 lines):**

- Replace inline color values
- Replace typography values
- Keep animation-specific constants local if they're unique to this component

**PhotoDetailModal.js:**

- Replace colors, typography, spacing
- Keep REACTION_EMOJIS as local constant (content, not style)

**Button.js, Card.js, Input.js:**

- These are foundational components
- Replace all hardcoded style values
- Ensure consistency across all usage

**Critical:** Components are reused across the app - changes propagate everywhere.
</action>
<verify>npm run lint passes, components render correctly in all screens</verify>
<done>Core components use design constants</done>
</task>

<task type="auto">
  <name>Task 3: Update remaining components and finalize</name>
  <files>lapse-clone-app/src/components/FeedPhotoCard.js, lapse-clone-app/src/components/FriendRequestCard.js, lapse-clone-app/src/components/UserSearchCard.js, lapse-clone-app/src/components/FeedLoadingSkeleton.js, lapse-clone-app/src/components/ReactionDisplay.js, lapse-clone-app/src/components/FriendStoryCard.js, lapse-clone-app/src/components/StoriesViewerModal.js, lapse-clone-app/src/components/AnimatedSplash.js, lapse-clone-app/src/components/ErrorBoundary.js</files>
  <action>
Add imports and replace hardcoded values in remaining components:

**Feed-related:**

- FeedPhotoCard.js - Photo cards in feed
- FeedLoadingSkeleton.js - Loading states
- ReactionDisplay.js - Emoji reactions

**Friends-related:**

- FriendRequestCard.js - Request cards
- UserSearchCard.js - Search results
- FriendStoryCard.js - Story thumbnails

**Modals/Special:**

- StoriesViewerModal.js - Full-screen stories
- AnimatedSplash.js - Splash screen (uses brand colors)
- ErrorBoundary.js - Error fallback UI

**Final verification:**
After all updates, run:

```bash
grep -r "backgroundColor: '#" src/ --include="*.js" | head -20
grep -r "color: '#" src/ --include="*.js" | head -20
grep -r "fontSize: [0-9]" src/ --include="*.js" | head -20
```

Document any remaining hardcoded values that were intentionally kept (with reasons).
</action>
<verify>npm run lint passes, grep shows minimal remaining hardcoded values, full app test</verify>
<done>All components use design constants, phase 21 complete</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] All 9 screens updated
- [ ] All 15 components updated
- [ ] No local COLORS objects remain anywhere
- [ ] `npm run lint` passes with 0 errors
- [ ] Full app visual regression check (all screens look identical)
- [ ] Grep check shows minimal remaining hardcoded style values
</verification>

<success_criteria>

- All source files use centralized constants
- No visual regressions anywhere in the app
- Local color/style objects removed or documented
- Phase 21 complete, ready for Phase 22
  </success_criteria>

<output>
After completion, create `.planning/phases/21-global-constants/21-03-SUMMARY.md`:

Include:

- Total files updated
- Any values intentionally kept hardcoded (with reasons)
- Grep results showing extraction coverage
- Phase complete status
  </output>
