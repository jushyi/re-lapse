---
phase: 34.2-feed-stories-refinements
plan: 01
type: execute
---

<objective>
Refine feed and stories UI with scroll behavior, simplified story cards, and overlapping profile photos.

Purpose: Polish the Instagram-style feed experience with modern layout refinements
Output: Stories row that scrolls with feed, cleaner story cards, overlapping profile photo design
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/34.1-instagram-style-feed-cards/34.1-01-SUMMARY.md

# Key files:

@src/screens/FeedScreen.js
@src/components/FriendStoryCard.js
@src/components/FeedPhotoCard.js
@src/styles/FeedPhotoCard.styles.js

# Codebase context:

@.planning/codebase/CONVENTIONS.md

**Established patterns from Phase 34.1:**

- Pure black background (#000000) for feed
- Edge-to-edge photos with no margins
- Profile photo with Ionicons person-circle fallback

**Current structure:**

- Stories row is rendered OUTSIDE FlatList (fixed position)
- FriendStoryCard has Polaroid frame with padding and dark border
- FeedPhotoCard has profile photo in info row BELOW photo
  </context>

<tasks>

<task type="auto">
  <name>Task 1: Stories row scrolls with feed</name>
  <files>src/screens/FeedScreen.js</files>
  <action>
Move stories row from fixed position into FlatList's ListHeaderComponent so it scrolls with the feed.

Current structure:

- renderStoriesRow() rendered OUTSIDE FlatList
- Stories stay fixed while feed scrolls

Target structure:

- Use ListHeaderComponent={renderStoriesRow} on FlatList
- Stories scroll away as user scrolls down
- Remove the separate storiesContainer from outside the FlatList

Keep the storiesContainer styles but apply them through the ListHeaderComponent.
Handle loading state properly - show skeleton in header during loading.
</action>
<verify>Run app, scroll feed - stories row should scroll up and disappear with the feed content</verify>
<done>Stories row moves with feed scroll instead of staying fixed at top</done>
</task>

<task type="auto">
  <name>Task 2: Simplify story cards (no Polaroid frame)</name>
  <files>src/components/FriendStoryCard.js</files>
  <action>
Remove Polaroid frame from FriendStoryCard, show just the blurred photo thumbnail.

Current design:

- Dark frame (#2A2A2A) with padding (top: 6, sides: 6, bottom: 20)
- Photo inside frame with blurRadius={20}
- Gradient border for unviewed, gray border for viewed

Target design:

- Just the blurred photo with rounded corners (borderRadius: 8)
- Gradient border for unviewed (keep LinearGradient wrapper)
- Gray/subtle border for viewed
- No Polaroid padding/frame around photo
- Keep display name below card

Changes:

- Remove polaroidFrame container and its styles
- Apply gradient/border directly to photo container
- Adjust dimensions - card should be more compact (square-ish, not tall Polaroid shape)
- Suggested size: 68x68 photo area (or similar square proportion)
- Keep the gradient glow effect on unviewed stories

Keep blurRadius={20} on the photo - the mysterious blur effect is intentional.
</action>
<verify>Run app, check stories row - cards should show just blurred photos without Polaroid frame styling</verify>
<done>Story cards display as simple blurred photo thumbnails with gradient border, no Polaroid frame</done>
</task>

<task type="auto">
  <name>Task 3: Profile photo overlaps feed card with floating name</name>
  <files>src/components/FeedPhotoCard.js, src/styles/FeedPhotoCard.styles.js</files>
  <action>
Redesign feed card so profile photo overlaps the bottom edge of the photo with name floating below.

Current layout:

```
[Photo - full width]
[Profile pic | Name + Timestamp] - info row below
[Reactions row]
```

Target layout:

```
[Photo - full width]
   [Profile pic overlapping bottom edge, centered or left-aligned]
   [Name centered below profile pic]
   [Timestamp below name]
[Reactions row]
```

Implementation:

1. Make photoContainer position: 'relative'
2. Add profileOverlay container with position: 'absolute', bottom position that overlaps photo edge
3. Profile photo (48-56px diameter) positioned to overlap photo by ~50%
4. Name text centered below profile photo
5. Timestamp below name
6. Remove the horizontal infoRow layout

Style adjustments:

- Profile photo: 48-56px diameter (slightly larger for emphasis)
- Name: fontSize 14, fontWeight '600', marginTop 8
- Timestamp: fontSize 12, color secondary, marginTop 2
- Center the profile overlay section (or left-align with padding if preferred)
- Add subtle shadow or background blur behind profile photo for visibility

Keep reactions row and noReactions prompt at bottom with existing styles.
</action>
<verify>Run app, check feed cards - profile photo should overlap the bottom of the photo with name/timestamp floating below</verify>
<done>Feed cards display overlapping profile photo design with name floating below</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Feed and stories UI refinements - scrollable stories, simplified cards, overlapping profiles</what-built>
  <how-to-verify>
    1. Run: npx expo start
    2. Open app on device/simulator
    3. Check stories row at top - should show simple blurred photo thumbnails (no Polaroid frames)
    4. Scroll feed down - stories row should scroll up and disappear
    5. Check feed cards - profile photo should overlap bottom edge of each photo
    6. Check name/timestamp are centered below profile photo
    7. Verify reactions still display correctly at bottom
    8. Check unviewed stories have gradient glow, viewed have subtle border
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] Stories row scrolls with feed (not fixed)
- [ ] Story cards show just blurred photo (no Polaroid frame)
- [ ] Gradient glow preserved for unviewed stories
- [ ] Profile photo overlaps bottom edge of feed photos
- [ ] Name/timestamp float below profile photo
- [ ] Reactions row displays correctly
- [ ] No TypeScript/JavaScript errors
- [ ] Visual polish matches modern Instagram-style aesthetic
</verification>

<success_criteria>

- All 3 UI refinements implemented
- Stories scroll behavior works correctly
- Story cards are visually simplified
- Profile overlap design implemented
- No regressions in existing functionality
  </success_criteria>

<output>
After completion, create `.planning/phases/34.2-feed-stories-refinements/34.2-01-SUMMARY.md`:

# Phase 34.2 Plan 01: Feed & Stories UI Refinements Summary

**[Substantive one-liner about what shipped]**

## Accomplishments

- [Key outcomes]

## Files Created/Modified

- `path/to/file` - Description

## Decisions Made

[Key decisions and rationale]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Phase Readiness

[Ready for Phase 35-03 or next phase]
</output>
