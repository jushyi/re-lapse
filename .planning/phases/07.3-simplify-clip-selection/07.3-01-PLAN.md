---
phase: 07.3-simplify-clip-selection
plan: 01
type: execute
---

<objective>
Simplify ClipSelectionModal by removing the waveform scrubber since iTunes clips are only 30 seconds.

Purpose: Remove unnecessary complexity - users don't need to select a clip range when the entire preview is 30 seconds. Simplifies UX and reduces code.
Output: Simplified ClipSelectionModal with just preview + confirm buttons, WaveformScrubber deleted.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07.2-song-modal-stacking/07.2-01-SUMMARY.md

# Key files:

@src/components/ProfileSong/ClipSelectionModal.js
@src/components/ProfileSong/WaveformScrubber.js
@src/components/ProfileSong/index.js
@src/services/audioPlayer.js

**Established patterns:**

- audioPlayer already defaults clipStart=0, clipEnd=30 (full preview)
- ProfileSongCard handles missing clip values gracefully
- Modal uses partial height with backdrop dismiss

**Constraining decisions:**

- [Phase 7]: 30-second iTunes previews, no Spotify (SDK deprecated)
- [Phase 7.2]: Screen + Modal overlay pattern for stacked navigation
  </context>

<tasks>

<task type="auto">
  <name>Task 1: Simplify ClipSelectionModal</name>
  <files>src/components/ProfileSong/ClipSelectionModal.js</files>
  <action>
Remove WaveformScrubber import and all clip range selection logic:

1. Remove imports: WaveformScrubber, GestureHandlerRootView
2. Remove state: clipStart, clipEnd, playbackPosition
3. Remove handleRangeChange callback
4. Remove WAVEFORM_WIDTH constant
5. Simplify handlePreview - play full 30s preview without clip range
6. Simplify handleConfirm - pass song without custom clipStart/clipEnd (audioPlayer defaults to 0/30)

Update UI:

1. Remove WaveformScrubber component from render
2. Remove waveformSection View wrapper
3. Update instructions text from "Drag the handles to select which part..." to "Preview the 30-second clip that will play on your profile"
4. Keep: song info display, preview button, confirm button
5. Change GestureHandlerRootView wrapper to plain View (no gestures needed)

The simplified modal should show:

- Header with close button + title "Preview Clip"
- Song info (album art, title, artist)
- Instructions text
- Preview/Stop button + "Use This Song" confirm button
  </action>
  <verify>TypeScript/ESLint check passes, app builds without errors</verify>
  <done>ClipSelectionModal renders without WaveformScrubber, preview plays full 30s clip, confirm saves song</done>
  </task>

<task type="auto">
  <name>Task 2: Remove WaveformScrubber file and export</name>
  <files>src/components/ProfileSong/WaveformScrubber.js, src/components/ProfileSong/index.js</files>
  <action>
1. Delete src/components/ProfileSong/WaveformScrubber.js file entirely
2. Remove WaveformScrubber export from src/components/ProfileSong/index.js

No other files import WaveformScrubber (verified via grep).
</action>
<verify>App builds without errors, no dangling imports</verify>
<done>WaveformScrubber.js deleted, index.js updated</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Simplified ClipSelectionModal without waveform scrubber</what-built>
  <how-to-verify>
    1. Run: npx expo start
    2. Navigate to Profile tab
    3. Add a song (or tap existing song and Edit Song)
    4. Select any song from search results
    5. Verify ClipSelectionModal appears with:
       - Song info (album art, title, artist)
       - "Preview the 30-second clip..." instruction text
       - Preview button and "Use This Song" button
       - NO waveform scrubber or drag handles
    6. Tap Preview - confirm audio plays
    7. Tap Use This Song - confirm song is saved to profile
    8. Verify song plays on profile card (full 30s preview)
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] App builds without errors (`npx expo start`)
- [ ] ClipSelectionModal renders without WaveformScrubber
- [ ] Preview button plays full 30-second clip
- [ ] Confirm button saves song to profile
- [ ] Song plays correctly on ProfileSongCard
- [ ] No console errors or warnings related to removed components
</verification>

<success_criteria>

- WaveformScrubber.js deleted
- ClipSelectionModal simplified (no drag-to-select)
- Full song selection flow works: search → preview → confirm → plays on profile
- No TypeScript/ESLint errors
- All commits atomic and properly formatted
  </success_criteria>

<output>
After completion, create `.planning/phases/07.3-simplify-clip-selection/07.3-01-SUMMARY.md`:

# Phase 7.3 Plan 01: Simplify Clip Selection Modal Summary

**[One-liner describing what shipped]**

## Accomplishments

- [Key outcome 1]
- [Key outcome 2]

## Files Created/Modified

- `path/to/file.ts` - Description

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Phase Readiness

Phase 7.3 complete, ready for Phase 8 (User Albums Display)
</output>
