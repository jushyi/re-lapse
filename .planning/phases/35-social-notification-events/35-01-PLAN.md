---
phase: 35-social-notification-events
plan: 01
type: execute
---

<objective>
Build notification settings UI allowing users to control which push notifications they receive.

Purpose: Give users granular control over their notification experience with master toggle and per-type toggles.
Output: NotificationSettingsScreen accessible from Settings, with preferences persisted to Firestore.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/35-social-notification-events/35-CONTEXT.md

**Key files:**
@src/screens/SettingsScreen.js
@src/screens/NotificationsScreen.js
@src/navigation/AppNavigator.js
@src/constants/colors.js

**Existing patterns:**

- SettingsScreen uses sectioned menu items with icons and chevrons
- Dark theme with colors.background.primary (#000000)
- Standard screen header pattern with back button
- Switch/toggle pattern from React Native

**Notification types to support:**

- likes (reactions)
- comments
- follows (friend request accepted)
- friendRequests
- mentions

**User preferences schema (to add to user document):**

```javascript
notificationPreferences: {
  enabled: true,        // Master toggle
  likes: true,          // Reaction notifications
  comments: true,       // Comment notifications
  follows: true,        // Friend accepted notifications
  friendRequests: true, // Friend request notifications
  mentions: true,       // @mention notifications
}
```

</context>

<tasks>

<task type="auto">
  <name>Task 1: Create NotificationSettingsScreen with toggles</name>
  <files>src/screens/NotificationSettingsScreen.js, src/styles/NotificationSettingsScreen.styles.js</files>
  <action>
Create NotificationSettingsScreen following SettingsScreen patterns:

1. Header with back button and "Notifications" title
2. Master toggle section at top:
   - "Push Notifications" label with Switch
   - Subtitle: "Turn off to stop all notifications"
   - When disabled, dim/disable all other toggles
3. Per-type toggles section (each with icon, label, Switch):
   - Likes (heart-outline): "When someone reacts to your photo"
   - Comments (chatbubble-outline): "When someone comments on your photo"
   - Follows (person-add-outline): "When someone accepts your friend request"
   - Friend Requests (people-outline): "When someone sends you a friend request"
   - Mentions (at-outline): "When someone mentions you in a comment"
4. Load initial state from user.notificationPreferences (default all true if not set)
5. Save changes immediately on toggle via updateDoc to users/{userId}
6. Use useAuth() to get current user

Style file should follow existing patterns (dark theme, colors constants).
Do NOT use any third-party toggle/switch libraries - use React Native's built-in Switch component.
</action>
<verify>File created, imports resolve, no TypeScript/ESLint errors</verify>
<done>NotificationSettingsScreen renders with master toggle and 5 per-type toggles, saves preferences to Firestore on change</done>
</task>

<task type="auto">
  <name>Task 2: Add Notifications to SettingsScreen and navigation</name>
  <files>src/screens/SettingsScreen.js, src/navigation/AppNavigator.js, src/screens/index.js</files>
  <action>
1. In SettingsScreen.js:
   - Add new "Notifications" section after "Account" section
   - Single item: { id: 'notifications', label: 'Notifications', icon: 'notifications-outline', onPress: () => handleNavigate('NotificationSettings') }

2. In AppNavigator.js:
   - Import NotificationSettingsScreen
   - Add to MainStack: <Stack.Screen name="NotificationSettings" component={NotificationSettingsScreen} options={{ headerShown: false }} />

3. In src/screens/index.js:
   - Export NotificationSettingsScreen

Follow existing patterns exactly - no custom styling or deviations from established patterns.
</action>
<verify>npm start (Expo), navigate Settings > Notifications opens NotificationSettingsScreen</verify>
<done>Notifications menu item appears in Settings between Account and Privacy, navigates to NotificationSettingsScreen</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] NotificationSettingsScreen renders without errors
- [ ] Master toggle enables/disables all notification types
- [ ] Individual toggles save to Firestore immediately
- [ ] Settings > Notifications navigation works
- [ ] Preferences persist across app restart
- [ ] UI matches app's dark theme aesthetic
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- No new errors or warnings
- User can toggle notification preferences
- Preferences saved to Firestore user document
  </success_criteria>

<output>
After completion, create `.planning/phases/35-social-notification-events/35-01-SUMMARY.md`
</output>
