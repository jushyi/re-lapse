# UAT Issues: Phase 47.1 Plan 02

**Tested:** 2026-02-11
**Source:** .planning/phases/47.1-comment-at-tagging/47.1-02-SUMMARY.md
**Tester:** User via /gsd:verify-work

## Open Issues

### UAT-002: @mention profile navigation renders behind current view

**Discovered:** 2026-02-11
**Phase/Plan:** 47.1-02
**Severity:** Major
**Feature:** @mention profile navigation
**Description:** Tapping an @mention in a posted comment (non-reply) causes the profile to render behind the full-screen photo view and bottom sheet instead of navigating properly. Closing the photo view briefly shows the profile but also closes it. Multiple taps can leave the view in a stuck state where no buttons work.
**Expected:** Tapping @mention should navigate to the mentioned user's profile screen (pushing a new screen or dismissing the current view first)
**Actual:** Profile renders underneath the current view stack. Dismissing the photo view briefly shows and then closes the profile. Repeated taps can freeze the UI.
**Fix attempt:** 47.1-02-FIX Task 2 (requestAnimationFrame deferral) — did NOT resolve. Same behavior persists.
**Repro:**

1. Open a photo's comments
2. Find a posted comment with an @mention (non-reply)
3. Tap the @mentioned username
4. Observe: nothing visually changes — profile rendered behind
5. Close the bottom sheet and photo view
6. Profile flashes briefly then disappears
7. (Optional) Tap @mention multiple times rapidly — view may get stuck

### UAT-003: Reply autocomplete text replacement corrupts input

**Discovered:** 2026-02-11
**Phase/Plan:** 47.1-02
**Severity:** Major (upgraded from Minor)
**Feature:** Reply @-mention autocomplete
**Description:** When composing a reply and using @-autocomplete, selecting a suggestion replaces the wrong @ (the auto-inserted reply @mention) instead of the one being typed. The replaced username gets repositioned after a space, and the cursor ends up at the wrong position.
**Expected:** Selecting a suggestion should cleanly replace the `@query` being typed with `@username` — leaving the auto-inserted reply @mention intact
**Actual:** The auto-inserted reply @mention gets replaced. The selected username is mispositioned with extra spacing. Text input is corrupted.
**Fix attempt:** 47.1-02-FIX Task 1 (prevTextLengthRef cursor adjustment) — changed behavior but did NOT resolve. Now corrupts text differently (replaces wrong @mention).
**Repro:**

1. Open comments on a photo
2. Tap "Reply" on an existing comment
3. After the auto-inserted @mention, type some text then `@a` (or any `@` + letter)
4. Select a suggestion from the overlay
5. Observe: the auto-inserted reply @mention is replaced instead of the typed one; text is corrupted

## Resolved Issues

### UAT-001: @-trigger requires extra character before overlay appears

**Discovered:** 2026-02-11
**Resolved:** 2026-02-11 — Fixed in 47.1-02-FIX Task 1
**Commit:** aae3026
**Severity:** Minor
**Description:** Typing `@` alone did not show the suggestion overlay. Now shows immediately.

---

_Phase: 47.1-comment-at-tagging_
_Plan: 02_
_Tested: 2026-02-11_
