---
phase: 03-signup-flow-refactor
plan: 01
type: execute
---

<objective>
Add profile song selection UI to ProfileSetupScreen.

Purpose: Extend the profile setup to include song selection as part of the signup flow, matching the vision of "Profile + Song together" in one cohesive screen.
Output: ProfileSetupScreen with song picker section (scaffold UI - music provider integration deferred to Phase 7)
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-signup-flow-refactor/03-CONTEXT.md

# Prior phase context (from frontmatter):

@.planning/phases/1-auth-shared-components/1-01-SUMMARY.md
@.planning/phases/02-login-screen-refactor/02-01-SUMMARY.md

# Key files:

@src/screens/ProfileSetupScreen.js
@src/constants/colors.js
@src/components/Button.js
@src/components/Input.js

**Tech stack available:** colors.js constants, Button/Input components with dark theme
**Established patterns:** Dark theme components use colors.background.secondary for backgrounds
**Constraining decisions:**

- Phase 1: Use colors.js constants throughout for consistency
- Phase 2: REWIND branding (not LAPSE)
  </context>

<tasks>

<task type="auto">
  <name>Task 1: Add profile song section to ProfileSetupScreen</name>
  <files>src/screens/ProfileSetupScreen.js</files>
  <action>
Add a "Profile Song" section below the bio input and above the Complete Setup button:

1. Add state for song selection: `const [selectedSong, setSelectedSong] = useState(null);`

2. Create a song picker placeholder UI section with:
   - Section label "Profile Song (Optional)" matching other labels
   - A TouchableOpacity styled similar to photoContainer but for song:
     - When no song selected: Show music icon (ðŸŽµ) with "Add a Song" text
     - When song selected: Show song title and artist (placeholder for now)
   - Style using colors.background.tertiary, colors.border.subtle (matching photo placeholder pattern)

3. handleSongPress function that shows an Alert placeholder:

   ```javascript
   const handleSongPress = () => {
     Alert.alert(
       'Profile Song',
       "Music provider integration coming soon! You'll be able to search and select your favorite song.",
       [{ text: 'OK' }]
     );
   };
   ```

4. Song data will be stored as: `{ title: string, artist: string, previewUrl: string | null }` (for future integration)

5. Update handleCompleteSetup to include selectedSong in updateData (as null for now)

Keep the existing layout structure - song section goes after bio, before the Complete Setup button. Match the visual style of the profile photo section (dashed border, icon, text).

DO NOT integrate actual music APIs - that's Phase 7. This is UI scaffold only.
</action>
<verify>npm run lint passes, app compiles without errors</verify>
<done>ProfileSetupScreen shows song section with placeholder UI, pressing it shows "coming soon" alert</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Profile song section added to ProfileSetupScreen</what-built>
  <how-to-verify>
    1. Run: npx expo start
    2. Go through phone auth flow (or log out and back in if needed)
    3. Reach ProfileSetupScreen
    4. Verify: "Profile Song (Optional)" section appears after Bio
    5. Verify: Song placeholder shows music icon and "Add a Song" text
    6. Verify: Tapping the song placeholder shows "coming soon" alert
    7. Verify: Visual styling matches photo placeholder (dashed border, dark background)
    8. Verify: "Complete Setup" button still works and navigates forward
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] ProfileSetupScreen compiles without errors
- [ ] Song section appears in correct position (after bio, before button)
- [ ] Visual styling is consistent with existing dark theme
- [ ] Placeholder alert appears when tapping song section
</verification>

<success_criteria>

- Profile song UI section added to ProfileSetupScreen
- Visual style matches existing photo placeholder pattern
- User can see and tap the song section (shows placeholder alert)
- No TypeScript/lint errors
- Ready for Phase 7 music provider integration
  </success_criteria>

<output>
After completion, create `.planning/phases/03-signup-flow-refactor/03-01-SUMMARY.md`
</output>
