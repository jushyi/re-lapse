---
phase: 08-user-albums
plan: 02
type: execute
---

<objective>
Create album display components and integrate into ProfileScreen.

Purpose: Show user's albums as a horizontal scrollable bar on their profile.
Output: AlbumCard and AlbumBar components displaying albums on ProfileScreen.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./08-02-SUMMARY.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/08-user-albums/08-CONTEXT.md
@.planning/phases/08-user-albums/08-01-SUMMARY.md

@src/screens/ProfileScreen.js
@src/services/firebase/albumService.js
@src/constants/colors.js

**From context - Album bar specs:**

- "Albums" section header label
- Large square cards (140-160px) with cover photo
- Title centered below, wraps to two lines max
- Add button: same size square with plus icon, dashed border pattern
- Albums ordered by recently updated (most active first)
- Replaces existing "Albums" placeholder on profile
  </context>

<tasks>

<task type="auto">
  <name>Task 1: Create AlbumCard component</name>
  <files>src/components/AlbumCard.js</files>
  <action>
Create AlbumCard component for displaying a single album in the bar.

Props:

- `album` - Album object with { id, name, coverPhotoId, photoIds }
- `coverPhotoUrl` - URL for the cover photo (resolved by parent)
- `onPress` - Callback when card tapped
- `onLongPress` - Optional callback for long press (edit menu)

Layout (Pinterest board style):

- 150x150 square container
- Cover photo fills the square (borderRadius 12)
- If no cover photo, show placeholder with Ionicons "images-outline"
- Title below card: centered, max 2 lines, ellipsis overflow
- Font: 14px, colors.text.primary

Also create AddAlbumCard variant:

- Same 150x150 size
- Dashed border (colors.border.subtle, 2px dash)
- Plus icon centered (Ionicons "add", 40px, colors.text.secondary)
- "New Album" text below (same styling as album title)
- Takes `onPress` prop only
  </action>
  <verify>Component renders without errors when imported</verify>
  <done>AlbumCard displays cover photo and title, AddAlbumCard shows dashed plus button</done>
  </task>

<task type="auto">
  <name>Task 2: Create AlbumBar component</name>
  <files>src/components/AlbumBar.js</files>
  <action>
Create AlbumBar component - horizontal scrolling album bar.

Props:

- `albums` - Array of album objects
- `photoUrls` - Map of photoId -> URL for resolving cover photos
- `isOwnProfile` - Boolean, shows add button only for own profile
- `onAlbumPress` - Callback(album) when album tapped
- `onAlbumLongPress` - Callback(album) for long press (edit menu)
- `onAddPress` - Callback when add button pressed

Layout:

- "Albums" section header (16px bold, colors.text.primary, marginBottom 12)
- Horizontal FlatList with albums
- If isOwnProfile: AddAlbumCard at the end of list
- 12px gap between cards
- Horizontal padding 16px (matches profile margins)
- showsHorizontalScrollIndicator={false}

Empty state (isOwnProfile, no albums):

- Show only AddAlbumCard
- Text below: "Create your first album" (colors.text.secondary, centered)

Empty state (not own profile, no albums):

- Don't render anything (return null)
  </action>
  <verify>Component renders horizontal scroll with mock album data</verify>
  <done>AlbumBar shows horizontal scroll of AlbumCards with add button for own profile</done>
  </task>

<task type="auto">
  <name>Task 3: Integrate AlbumBar into ProfileScreen</name>
  <files>src/screens/ProfileScreen.js, src/components/index.js</files>
  <action>
Integrate AlbumBar into ProfileScreen:

1. Export AlbumCard, AddAlbumCard, AlbumBar from components/index.js

2. In ProfileScreen:
   - Import { AlbumBar } from '../components'
   - Import { getUserAlbums } from '../services/firebase'
   - Add state: `const [albums, setAlbums] = useState([])`
   - Add useEffect to fetch albums on mount (for own profile, use user.uid)
   - For other profiles: albums will be empty for now (TODO: fetch with friendship check)

3. Replace the "Albums" placeholder View with:

```jsx
<View style={styles.albumsContainer}>
  <AlbumBar
    albums={albums}
    photoUrls={{}} // TODO: resolve cover photo URLs
    isOwnProfile={isOwnProfile}
    onAlbumPress={handleAlbumPress}
    onAlbumLongPress={handleAlbumLongPress}
    onAddPress={handleAddAlbumPress}
  />
</View>
```

4. Add handler stubs:
   - `handleAlbumPress(album)` - Log for now, will navigate to grid in 08-04
   - `handleAlbumLongPress(album)` - Log for now, edit menu in 08-06
   - `handleAddAlbumPress()` - Log for now, navigate to create in 08-03

5. Add styles.albumsContainer: marginHorizontal 0 (AlbumBar handles its own padding), marginTop 16

Note: Cover photo URL resolution will be basic for now - if album has coverPhotoId, we'll need to fetch the photo document to get imageURL. For this task, pass empty photoUrls and let AlbumCard show placeholder. Full URL resolution comes in a later task.
</action>
<verify>ProfileScreen shows AlbumBar section where placeholder was</verify>
<done>AlbumBar integrated, fetches and displays user's albums (empty state works)</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Album bar display on ProfileScreen with cards and add button</what-built>
  <how-to-verify>
    1. Run: npx expo start
    2. Log in and navigate to Profile tab
    3. Verify: "Albums" section header appears
    4. Verify: Add button with plus icon and dashed border shows (own profile)
    5. Verify: "Create your first album" empty state text appears
    6. Verify: Horizontal scroll works if you manually add mock albums in state
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] AlbumCard component created with cover photo and title
- [ ] AddAlbumCard component created with dashed border and plus icon
- [ ] AlbumBar component created with horizontal FlatList
- [ ] ProfileScreen integrates AlbumBar replacing placeholder
- [ ] Empty state shows for own profile with no albums
- [ ] No lint errors: `npm run lint`
</verification>

<success_criteria>

- Album bar displays on profile
- Add button appears for own profile
- Empty state is visually appealing
- Ready for album creation flow
  </success_criteria>

<output>
After completion, create `.planning/phases/08-user-albums/08-02-SUMMARY.md`
</output>
