---
phase: 30-rewind-rebrand
plan: 04
type: execute
---

<objective>
Rebrand AnimatedSplash component with Rewind colors and add blur-to-focus reveal effect.

Purpose: Create a memorable startup experience that transitions from shutter opening to focused camera view.
Output: Updated AnimatedSplash.js with purple/pink gradients and blur-to-focus animation.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/30-rewind-rebrand/30-CONTEXT.md
@.planning/phases/30-rewind-rebrand/30-RESEARCH.md
@src/components/AnimatedSplash.js
@src/constants/colors.js
@src/constants/animations.js

**Current AnimatedSplash.js:**

- APERTURE_COLOR: '#FF6B6B' (coral)
- BACKGROUND_COLOR: '#FAFAFA' (off-white)
- 6-blade aperture animation
- No blur effect

**Target from CONTEXT.md:**

- Background: near-black (#0F0F0F)
- Aperture blades: purple (#8B5CF6) or purple-to-pink gradient
- After shutter opens: blur-to-focus effect (like lens finding clarity)
- Animation should be "quick but noticeable"

**From RESEARCH.md:**

- Use expo-blur's BlurView with Reanimated's useAnimatedProps
- Animate intensity from high (80) to 0
- Use withDelay after shutter animation completes
- Android needs experimentalBlurMethod="blur" prop
  </context>

<tasks>

<task type="auto">
  <name>Task 1: Update AnimatedSplash colors to Rewind palette</name>
  <files>src/components/AnimatedSplash.js</files>
  <action>
Update the color constants and import design tokens:

1. Add import at top:

   ```javascript
   import { colors } from '../constants/colors';
   import { animations } from '../constants/animations';
   ```

2. Replace color constants:

   ```javascript
   // OLD:
   const APERTURE_COLOR = '#FF6B6B';
   const BACKGROUND_COLOR = '#FAFAFA';

   // NEW (use design tokens):
   const APERTURE_COLOR = colors.brand.purple; // '#8B5CF6'
   const BACKGROUND_COLOR = colors.background.primary; // '#0F0F0F'
   ```

3. Update timing constants to use animations.STARTUP:

   ```javascript
   const ANIMATION_DURATION = animations.STARTUP?.SHUTTER_DURATION || 800;
   const FADE_OUT_DURATION = animations.STARTUP?.FADE_OUT_DURATION || 300;
   ```

4. Update styles.background:

   ```javascript
   background: {
     flex: 1,
     backgroundColor: BACKGROUND_COLOR,  // Now #0F0F0F
   },
   ```

5. Update bladeTriangle borderBottomColor to use APERTURE_COLOR (already does, but verify).

The aperture blades should now be purple (#8B5CF6) on a dark background (#0F0F0F).
</action>
<verify>
grep -E "(colors\.|APERTURE_COLOR|BACKGROUND_COLOR)" src/components/AnimatedSplash.js
</verify>
<done>AnimatedSplash uses design tokens, shows purple blades on dark background</done>
</task>

<task type="auto">
  <name>Task 2: Add blur-to-focus overlay effect</name>
  <files>src/components/AnimatedSplash.js</files>
  <action>
Add a BlurView that animates from blurred to clear after the shutter opens:

1. Add imports:

   ```javascript
   import { BlurView } from 'expo-blur';
   import Animated, {
     // ... existing imports
     useAnimatedProps,
     withDelay,
   } from 'react-native-reanimated';
   ```

2. Create AnimatedBlurView:

   ```javascript
   const AnimatedBlurView = Animated.createAnimatedComponent(BlurView);
   ```

3. Add blur state and animation in the AnimatedSplash component:

   ```javascript
   const blurIntensity = useSharedValue(80);
   const [showBlur, setShowBlur] = useState(true);

   // In useEffect, after shutter animation:
   blurIntensity.value = withDelay(
     ANIMATION_DURATION + 100, // Start after shutter opens
     withTiming(
       0,
       {
         duration: animations.STARTUP?.BLUR_DURATION || 600,
       },
       finished => {
         if (finished) {
           runOnJS(setShowBlur)(false);
         }
       }
     )
   );

   const blurAnimatedProps = useAnimatedProps(() => ({
     intensity: blurIntensity.value,
   }));
   ```

4. Add BlurView to render (between background and children, or as overlay):

   ```javascript
   {
     showBlur && (
       <AnimatedBlurView
         style={StyleSheet.absoluteFill}
         tint="dark"
         experimentalBlurMethod="blur"
         animatedProps={blurAnimatedProps}
       />
     );
   }
   ```

5. Place the BlurView AFTER the shutter container in the render tree so it overlays everything.

6. Update the completion callback timing:
   - The onAnimationComplete callback should fire after blur animation completes
   - Adjust the opacity fade timing to account for blur duration

The sequence should be:

1. Shutter opens (800ms)
2. Brief pause (100ms)
3. Blur clears (600ms)
4. Fade out (300ms)
5. onAnimationComplete fires
   </action>
   <verify>
   grep -E "(BlurView|blurIntensity|experimentalBlurMethod)" src/components/AnimatedSplash.js
   </verify>
   <done>AnimatedSplash has blur-to-focus effect that animates after shutter opens</done>
   </task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Rebranded animated splash with purple shutter blades on dark background, plus blur-to-focus reveal effect</what-built>
  <how-to-verify>
    1. Run: npx expo start
    2. Open the app in Expo Go (or dev build)
    3. Verify:
       - Background is dark/black (not off-white)
       - Aperture blades are purple (not coral)
       - After blades open, there's a blur-to-focus effect
       - Animation feels "quick but noticeable" - snappy, not sluggish
       - No white flash between states
    4. Kill and relaunch the app to see the full animation again

    Note: Full splash screen behavior only works in standalone builds. In Expo Go, you'll see the animated component but the native splash timing may differ.

  </how-to-verify>
  <resume-signal>Type "approved" if animation looks good, or describe what needs adjustment (colors, timing, effect)</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] AnimatedSplash imports from constants/colors.js
- [ ] Background color is #0F0F0F (dark)
- [ ] Aperture blade color is purple (#8B5CF6)
- [ ] BlurView with animated intensity is implemented
- [ ] No syntax errors: `npx eslint src/components/AnimatedSplash.js --no-warn-ignored`
- [ ] Human verification confirms animation looks correct
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- No ESLint errors
- Animation is visually approved
- Startup experience matches "nostalgic but fresh" vision
  </success_criteria>

<output>
After completion, create `.planning/phases/30-rewind-rebrand/30-04-SUMMARY.md`
</output>
