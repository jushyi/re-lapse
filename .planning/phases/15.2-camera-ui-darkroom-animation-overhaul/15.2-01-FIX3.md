---
phase: 15.2-camera-ui-darkroom-animation-overhaul
plan: 15.2-01-FIX3
type: fix
---

<objective>
Fix 3 UAT issues + 1 enhancement from plan 15.2-01-FIX2.

Source: 15.2-01-FIX2-ISSUES.md
Priority: 0 critical, 1 major, 1 minor, 1 cosmetic, 1 enhancement
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-phase.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/ROADMAP.md

**Issues being fixed:**
@.planning/phases/15.2-camera-ui-darkroom-animation-overhaul/15.2-01-FIX2-ISSUES.md

**Key Files:**
@src/screens/CameraScreen.js
</context>

<tasks>

<task type="auto">
  <name>Fix UAT-001: Capture button off-center (shifted right)</name>
  <files>src/screens/CameraScreen.js</files>
  <action>
The capture button appears shifted right because footerControls uses `gap: 24` between the darkroom button (50px) and capture button (100px), but they're centered together with no balancing element on the right.

Fix approach - center the capture button absolutely and position darkroom relative to it:
1. Change footerControls to use position: relative
2. Make captureButtonOuter positioned absolutely in center (alignSelf: 'center' won't work, need explicit centering)
3. Position darkroom button to the LEFT of center using absolute positioning

Alternative simpler approach - use a spacer:
1. Add an invisible View with same width as darkroomButton (50px) on the right side
2. This balances the layout so capture button is truly centered

Implement the spacer approach as it's simpler and more maintainable:
- Add a View with width 50, height 50, opacity 0 after the capture button
- This creates visual balance: [darkroom 50px] [gap 24] [capture 100px] [gap 24] [spacer 50px]
  </action>
  <verify>App runs, capture button is visually centered in footer</verify>
  <done>Capture button appears horizontally centered between screen edges</done>
</task>

<task type="auto">
  <name>Fix UAT-002: Replace janky flip camera icon with cleaner design</name>
  <files>src/screens/CameraScreen.js</files>
  <action>
The current FlipCameraIcon has complex circular arrows that look "janky". Replace with a simpler, cleaner iOS-style icon.

Use a standard "two arrows forming a circle" rotation icon - simpler than camera-with-arrows:

Replace FlipCameraIcon SVG with:
- Simple refresh/rotate arrows icon (two curved arrows forming a circle)
- OR use SF Symbols style: two arrows in circular motion
- Keep stroke-only design to match FlashIcon style

New simpler SVG approach:
```jsx
// Simple circular arrows icon (common flip/rotate pattern)
<Svg width="24" height="24" viewBox="0 0 24 24" fill="none">
  {/* Top arrow - curves right and down */}
  <Path
    d="M17 1l4 4-4 4"
    stroke={color}
    strokeWidth="1.5"
    strokeLinecap="round"
    strokeLinejoin="round"
  />
  <Path
    d="M3 11V9a4 4 0 0 1 4-4h14"
    stroke={color}
    strokeWidth="1.5"
    strokeLinecap="round"
    strokeLinejoin="round"
  />
  {/* Bottom arrow - curves left and up */}
  <Path
    d="M7 23l-4-4 4-4"
    stroke={color}
    strokeWidth="1.5"
    strokeLinecap="round"
    strokeLinejoin="round"
  />
  <Path
    d="M21 13v2a4 4 0 0 1-4 4H3"
    stroke={color}
    strokeWidth="1.5"
    strokeLinecap="round"
    strokeLinejoin="round"
  />
</Svg>
```

This is the standard "repeat/refresh" icon that's commonly used for camera flip.
  </action>
  <verify>App runs, flip camera button shows clean rotation arrows icon</verify>
  <done>Flip camera icon is clean rotation arrows, no longer looks janky</done>
</task>

<task type="auto">
  <name>Fix UAT-003: Correct zoom levels to match actual camera zoom</name>
  <files>src/screens/CameraScreen.js</files>
  <action>
Current ZOOM_LEVELS mapping is wrong. expo-camera zoom is 0-1 where:
- 0 = no zoom (1x optical)
- 1 = max zoom (varies by device)

The current mapping has:
- 0.5x → cameraZoom: 0 (this should be correct for wide angle if device supports it)
- 1x → cameraZoom: 0.17 (WRONG - 1x should be 0, not 0.17)
- 3x → cameraZoom: 0.5 (too high for 3x)

Fix the mapping:
- 0.5x = wide angle lens (if available), use negative conceptually but expo-camera doesn't support <0
  Actually: expo-camera 0 = 1x baseline, there's no 0.5x ultra-wide via zoom property alone
  For devices without ultra-wide, 0.5x should just show as "unavailable" or map to 0
- 1x = cameraZoom: 0 (baseline, no zoom)
- 3x = cameraZoom: around 0.25-0.35 (device dependent, but lower than current 0.5)

Correct mapping based on expo-camera behavior:
```javascript
const ZOOM_LEVELS = [
  { label: '.5', value: 0.5, cameraZoom: 0 },      // Wide angle - same as 1x on most devices without ultra-wide
  { label: '1', value: 1, cameraZoom: 0 },         // Normal - NO ZOOM (was wrongly 0.17)
  { label: '3', value: 3, cameraZoom: 0.25 },      // 3x telephoto (was too high at 0.5)
];
```

The key fix: 1x should be cameraZoom: 0, NOT 0.17.
  </action>
  <verify>App runs, 1x zoom shows normal view (not zoomed), 3x shows moderate zoom</verify>
  <done>Zoom levels match expected: 0.5x wide, 1x normal (no zoom), 3x moderate telephoto</done>
</task>

<task type="auto">
  <name>ENH-001: Add haptic feedback to flash, capture, and flip buttons</name>
  <files>src/screens/CameraScreen.js</files>
  <action>
Add lightImpact() haptic feedback to the flash, capture, and flip camera buttons. The zoom control already has haptics via handleZoomChange.

Import is already present: `import { lightImpact } from '../utils/haptics';`

Add haptics to:
1. toggleFlash function - call lightImpact() at start
2. takePicture function - call lightImpact() at start (before playFlashEffect)
3. toggleCameraFacing function - call lightImpact() at start

This provides consistent tactile feedback across all camera controls.
  </action>
  <verify>App runs, all buttons (flash, capture, flip, zoom) provide haptic feedback on press</verify>
  <done>Haptic feedback fires on flash, capture, flip, and zoom button presses</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Capture button is visually centered in footer
- [ ] Flip camera icon is clean (rotation arrows, not camera-with-internal-arrows)
- [ ] 1x zoom shows normal view (no zoom applied)
- [ ] 3x zoom shows moderate telephoto (not extreme zoom)
- [ ] All buttons provide haptic feedback
- [ ] App runs without errors
</verification>

<success_criteria>
- All 3 UAT issues from 15.2-01-FIX2-ISSUES.md addressed
- Enhancement ENH-001 implemented
- App runs without errors
- Ready for re-verification
</success_criteria>

<output>
After completion, create `.planning/phases/15.2-camera-ui-darkroom-animation-overhaul/15.2-01-FIX3-SUMMARY.md`
</output>
