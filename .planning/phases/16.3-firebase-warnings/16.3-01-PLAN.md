---
phase: 16.3-firebase-warnings
plan: 01
type: execute
---

<objective>
Fix remaining React Native Firebase deprecation warnings by migrating the last 2 files to modular API.

Purpose: Eliminate console warnings about deprecated namespaced API usage, ensuring clean console output and future compatibility.
Output: Zero deprecation warnings from @react-native-firebase packages.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/16.3-firebase-warnings/16.3-RESEARCH.md

# Key files:
@App.js
@src/services/firebase/friendshipService.js

# Reference patterns (already correct):
@src/context/AuthContext.js (modular auth pattern)

**Codebase state:** 95% already migrated to modular API. Only App.js and friendshipService.js need changes.

**Established patterns from Phase 11:**
- Initialize `const db = getFirestore()` at module level
- Import pattern: `import { getAuth } from '@react-native-firebase/auth'`
- Access currentUser via `getAuth().currentUser` not `auth().currentUser`
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate App.js to modular auth API</name>
  <files>App.js</files>
  <action>
1. Change import from `import auth from '@react-native-firebase/auth'` to `import { getAuth } from '@react-native-firebase/auth'`
2. Replace `auth().currentUser` with `getAuth().currentUser` on lines 57 and 139

Note: This follows the exact pattern established in AuthContext.js which uses:
```javascript
import { getAuth, onAuthStateChanged as firebaseOnAuthStateChanged } from '@react-native-firebase/auth';
const auth = getAuth();
const currentUser = auth.currentUser;
```
  </action>
  <verify>grep -n "auth()" App.js should return no results</verify>
  <done>App.js uses modular getAuth() pattern, no namespaced auth() calls remain</done>
</task>

<task type="auto">
  <name>Task 2: Remove unused default import from friendshipService.js</name>
  <files>src/services/firebase/friendshipService.js</files>
  <action>
Change line 1 from:
```javascript
import firestore, { getFirestore, collection, doc, getDoc, getDocs, setDoc, updateDoc, deleteDoc, query, where, or, onSnapshot, serverTimestamp } from '@react-native-firebase/firestore';
```
To:
```javascript
import { getFirestore, collection, doc, getDoc, getDocs, setDoc, updateDoc, deleteDoc, query, where, or, onSnapshot, serverTimestamp } from '@react-native-firebase/firestore';
```

The default export `firestore` is never used in this file - only the named exports are used.
  </action>
  <verify>grep -n "^import firestore," src/services/firebase/friendshipService.js should return no results</verify>
  <done>friendshipService.js has no unused default import, only named modular imports</done>
</task>

<task type="auto">
  <name>Task 3: Verify no deprecation warnings remain</name>
  <files>App.js, src/services/firebase/friendshipService.js</files>
  <action>
1. Search entire codebase for remaining namespaced patterns:
   - `import auth from '@react-native-firebase/auth'`
   - `import firestore from '@react-native-firebase/firestore'`
   - `import storage from '@react-native-firebase/storage'`
   - `auth()` calls
   - `firestore()` calls
   - `storage()` calls

2. Verify no matches found (all should use modular API).

3. Run TypeScript/lint check to ensure no syntax errors introduced.
  </action>
  <verify>
grep -r "from '@react-native-firebase/auth'" --include="*.js" | grep -v "{ get" should return empty
grep -r "auth()" --include="*.js" | grep -v "phoneAuth" should return empty
  </verify>
  <done>Zero deprecated namespaced patterns found in codebase, all Firebase imports use modular API</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] grep for `auth()` returns no results (except phoneAuth references)
- [ ] grep for default Firebase imports returns no results
- [ ] App starts without deprecation warnings in console
- [ ] friendshipService.js has no unused imports
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- No deprecation warnings from @react-native-firebase packages
- Phase 16.3 complete, ready for Phase 17
</success_criteria>

<output>
After completion, create `.planning/phases/16.3-firebase-warnings/16.3-01-SUMMARY.md`:

# Phase 16.3 Plan 01: Fix Firebase Warnings Summary

**[Substantive one-liner]**

## Accomplishments

- [Key outcome 1]
- [Key outcome 2]

## Files Created/Modified

- `App.js` - Migrated to modular auth API
- `src/services/firebase/friendshipService.js` - Removed unused default import

## Decisions Made

None - straightforward migration following established patterns

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

Phase 16.3 complete, ready for Phase 17: Darkroom UX Polish
</output>
