---
phase: 12.1-friends-list-screen-crash-fix
plan: 01
subsystem: social
tags: [firebase, firestore, react-native-firebase, Filter, friendship]

# Dependency graph
requires:
  - phase: 12
    provides: exists() method fix
provides:
  - Working Filter.or/Filter.where pattern for friendship queries
  - FriendsListScreen loads without crash
affects: [Phase 13, Phase 14]

# Tech tracking
tech-stack:
  added: []
  patterns:
    - "firestore.Filter.or pattern for OR queries in modular API"

key-files:
  created: []
  modified:
    - src/services/firebase/friendshipService.js

key-decisions:
  - "Use firestore.Filter.or via default import instead of named Filter import"

patterns-established:
  - "React Native Firebase Filter.or pattern: firestore.Filter.or() not Filter.or()"

issues-created: []

# Metrics
duration: 5min
completed: 2026-01-19
---

# Phase 12.1 Plan 01: Fix Filter.or Usage Summary

**Fixed FriendsListScreen crash by correcting Filter.or access pattern from named import to default firestore import per React Native Firebase GitHub issue #7346**

## Performance

- **Duration:** 5 min
- **Started:** 2026-01-19
- **Completed:** 2026-01-19
- **Tasks:** 1
- **Files modified:** 1

## Accomplishments

- Added default `firestore` import alongside modular named imports
- Removed `Filter` from named imports (doesn't expose .or method when imported this way)
- Replaced all 3 occurrences of `Filter.or()` and `Filter.where()` with `firestore.Filter.or()` and `firestore.Filter.where()`

## Task Commits

1. **Task 1: Fix Filter.or usage in friendshipService.js** - `1f8d4df` (fix)

**Plan metadata:** (pending)

## Files Created/Modified

- `src/services/firebase/friendshipService.js` - Changed import pattern and updated 3 queries (getFriendships, getPendingRequests, subscribeFriendships)

## Decisions Made

- Used `firestore.Filter.or()` pattern via default import per React Native Firebase GitHub issue #7346 recommendation

## Deviations from Plan

None - plan executed exactly as written.

## Issues Encountered

None

## Next Phase Readiness

- Phase 12.1 complete
- FriendsListScreen should now load without ErrorBoundary catching crash
- Ready for Phase 13 (Production Build & Branding)

---
*Phase: 12.1-friends-list-screen-crash-fix*
*Completed: 2026-01-19*
