# Phase 52.2: Fix Photo Tagging Lag - ISS-016 - Context

**Gathered:** 2026-02-13
**Status:** Ready for research

<vision>
## How This Should Work

When you tag someone in a photo and then reopen the tag sheet, it should immediately show the checkmark indicating they're tagged. Currently, there's a lag: you tag someone, close the sheet, reopen it, and the checkmark isn't there - even though they ARE tagged in the backend. You have to navigate away from the photo and come back for the tag to appear.

The fix should make tagging feel instant and reliable:

- Tag someone → close sheet → reopen sheet → checkmark is there
- Tag appears immediately on the photo badge (feed, story, photo detail)
- No manual refresh or navigation required
- Tags update in real-time across all views

This is about state sync, not UI redesign. The existing tagging UI is fine - it just needs to update instantly instead of lagging behind the truth.

</vision>

<essential>
## What Must Be Nailed

Both of these are equally critical:

- **Tag sheet checkmark state accuracy** - If someone is tagged, their checkmark must appear immediately when you reopen the tag sheet. The sheet must always reflect the current truth.
- **Visual tag badges across all views** - Tags must appear instantly on the photo badge in feed, story view, photo detail modal, and anywhere else tags are displayed. Complete real-time sync.

The core issue is that the UI state isn't updating when the Firestore data changes. Root cause unknown but likely related to real-time subscription or state propagation.

</essential>

<boundaries>
## What's Out of Scope

- **No UI/UX improvements** - Don't redesign the tag sheet, don't add animations, don't change how tagging works
- **No feature enhancements** - Just fix the sync bug, don't add new tagging capabilities
- **No scope creep** - This is a pure bug fix to make the existing system work correctly

Keep it surgical: fix the real-time state sync, nothing more.

</boundaries>

<specifics>
## Specific Ideas

No specific requirements - just make it work like it should. The current UI is fine, just fix the state sync so tags appear instantly.

</specifics>

<notes>
## Additional Context

- Issue found during Plan 52-02 (Multi-Device Tests) UAT testing
- Logged as ISS-016 and deferred to post-UAT
- Root cause unknown, likely related to Firestore subscription not triggering re-renders or state not propagating correctly
- Must ensure tags update instantly across all views where they're displayed

</notes>

---

_Phase: 52.2-photo-tagging-lag_
_Context gathered: 2026-02-13_
