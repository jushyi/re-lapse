---
phase: 16.1-darkroom-bottom-sheet-ui-overhaul
plan: 01-FIX
type: fix
---

<objective>
Fix remaining UAT issue (UAT-003) from plan 16.1-01.

Source: 16.1-01-ISSUES.md
Priority: 0 critical, 0 major, 1 minor (with 3 sub-items)

Note: UAT-001 and UAT-002 were already resolved in a previous fix pass.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-phase.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/ROADMAP.md

**Issues being fixed:**
@.planning/phases/16.1-darkroom-bottom-sheet-ui-overhaul/16.1-01-ISSUES.md

**Original plan for reference:**
@.planning/phases/16.1-darkroom-bottom-sheet-ui-overhaul/16.1-01-PLAN.md

**File to modify:**
@src/components/DarkroomBottomSheet.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix UAT-003 - Spinner design, animation, and button text</name>
  <files>src/components/DarkroomBottomSheet.js</files>
  <action>
Fix three sub-issues from UAT-003:

**1. Button text fix:**
Change button text from "Hold to open photos" to "Hold to reveal photos"
- Update the resting state text in holdButtonText (currently line ~462)
- Keep "Opening..." during press (or change to "Revealing...")

**2. Spinner design - YouTube-style with play button:**
Replace current 3-dot spinner with a circular spinner that has a play triangle in the center:
- Outer circle: ring/border style (not filled)
- Inner: play triangle icon pointing right
- The entire element rotates when spinning
- Use View-based construction (no SVG dependency):
  - Outer View: circular border (borderWidth: 2, borderRadius: 50%)
  - Inner View: play triangle using CSS triangle technique (borders with transparent sides)

Replace SpinnerIcon component with:
```javascript
const SpinnerIcon = ({ rotation, color = COLORS.textPrimary }) => {
  return (
    <Animated.View
      style={[
        styles.spinnerOuter,
        { transform: [{ rotate: rotation }] }
      ]}
    >
      {/* Circular ring border */}
      <View style={[styles.spinnerRing, { borderColor: color }]} />
      {/* Play triangle in center */}
      <View style={[styles.playTriangle, { borderLeftColor: color }]} />
    </Animated.View>
  );
};
```

Add styles:
```javascript
spinnerOuter: {
  width: 24,
  height: 24,
  justifyContent: 'center',
  alignItems: 'center',
},
spinnerRing: {
  position: 'absolute',
  width: 24,
  height: 24,
  borderRadius: 12,
  borderWidth: 2,
},
playTriangle: {
  width: 0,
  height: 0,
  borderLeftWidth: 8,
  borderTopWidth: 5,
  borderBottomWidth: 5,
  borderTopColor: 'transparent',
  borderBottomColor: 'transparent',
  marginLeft: 3, // Offset to center visually
},
```

**3. Fix spinner animation:**
The spinner animation may not be updating properly. Fix by:
- Reset spinnerRotation.setValue(0) before starting new loop animation
- Add isInteraction: false to avoid animation conflicts

Update startSpinnerAnimation:
```javascript
const startSpinnerAnimation = (fast = false) => {
  if (spinnerAnimation.current) {
    spinnerAnimation.current.stop();
  }

  // Reset rotation value to 0 before starting
  spinnerRotation.setValue(0);

  const duration = fast ? SPINNER_FAST_DURATION : SPINNER_NORMAL_DURATION;

  spinnerAnimation.current = Animated.loop(
    Animated.timing(spinnerRotation, {
      toValue: 1,
      duration,
      easing: Easing.linear,
      useNativeDriver: true,
      isInteraction: false,
    })
  );

  spinnerAnimation.current.start();
};
```

Remove old spinner styles (spinnerContainer, spinnerDot) and add new ones.
  </action>
  <verify>
    - Run app with `npx expo start`
    - Open darkroom bottom sheet with photos ready
    - Verify button text reads "Hold to reveal photos"
    - Verify spinner shows circular ring with play triangle in center
    - Verify spinner is rotating continuously (not static)
    - Hold the button and verify spinner speeds up (2x faster)
    - Release and verify spinner returns to normal speed
  </verify>
  <done>
    - Button text says "Hold to reveal photos"
    - Spinner has YouTube-style design (ring with play icon)
    - Spinner animates continuously at rest
    - Spinner speeds up 2x during hold
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Fixed spinner design (YouTube-style with play icon), fixed spinner animation (spins and speeds up), fixed button text</what-built>
  <how-to-verify>
    1. Run: npx expo start
    2. Open the app on device/simulator
    3. Take a photo or have photos in queue
    4. Tap darkroom button to open bottom sheet
    5. Verify button text: "Hold to reveal photos" (not "open")
    6. Look at spinner icon: should be circular ring with play triangle
    7. Watch spinner: should be continuously rotating
    8. Hold the reveal button:
       - Spinner should visibly speed up (2x faster)
       - Fill animation should progress
       - Haptics should intensify
    9. Release before completion:
       - Spinner should slow back to normal speed
       - Fill should spring back to 0
  </how-to-verify>
  <resume-signal>Type "approved" or describe any remaining issues</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Button text updated to "Hold to reveal photos"
- [ ] Spinner redesigned with circular ring + play icon
- [ ] Spinner animation works (continuous rotation)
- [ ] Spinner speeds up during hold
- [ ] App builds without errors
</verification>

<success_criteria>
- All UAT-003 sub-issues addressed
- Spinner visually matches YouTube-style loading indicator
- Animation is smooth and responsive
- Ready for re-verification
</success_criteria>

<output>
After completion, create `.planning/phases/16.1-darkroom-bottom-sheet-ui-overhaul/16.1-01-FIX-SUMMARY.md`
</output>
