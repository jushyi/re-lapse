---
phase: 07.2-song-modal-stacking
plan: 01-FIX
type: fix
---

<objective>
Fix 2 UAT issues from plan 07.2-01.

Source: 07.2-01-ISSUES.md
Priority: 0 critical, 1 major, 1 cosmetic
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-phase.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/ROADMAP.md

**Issues being fixed:**
@.planning/phases/07.2-song-modal-stacking/07.2-01-ISSUES.md

**Original plan for reference:**
@.planning/phases/07.2-song-modal-stacking/07.2-01-PLAN.md

**Key files:**
@src/navigation/AppNavigator.js
@src/components/ProfileSong/ClipSelectionModal.js
@src/screens/ProfileSetupScreen.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix UAT-002 - Add SongSearchScreen to OnboardingStackNavigator</name>
  <files>src/navigation/AppNavigator.js</files>
  <action>
Add SongSearchScreen to OnboardingStackNavigator so profile onboarding can access song search.

1. Locate OnboardingStackNavigator function (around line 44)
2. Add SongSearchScreen as a Stack.Screen after Selects:

```jsx
<Stack.Screen
  name="SongSearch"
  component={SongSearchScreen}
  options={{
    presentation: 'card',
    animation: 'slide_from_bottom',
  }}
/>
```

This mirrors the same screen configuration used in ProfileStackNavigator.
The OnboardingStackNavigator now has: ProfileSetup, Selects, SongSearch

Note: SongSearchScreen is already imported at the top of the file.
</action>
<verify>

- SongSearchScreen added to OnboardingStackNavigator
- Same options as in ProfileStackNavigator (slide_from_bottom)
- No syntax errors
  </verify>
  <done>
  ProfileSetupScreen can now navigate to SongSearch during onboarding.
  </done>
  </task>

<task type="auto">
  <name>Task 2: Fix UAT-001 - Change ClipSelectionModal animation to fade</name>
  <files>src/components/ProfileSong/ClipSelectionModal.js</files>
  <action>
Change ClipSelectionModal from slide-in to fade-in animation.

1. Locate the Modal component (around line 83)
2. Change `animationType="slide"` to `animationType="fade"`

Current:

```jsx
<Modal visible={visible} animationType="slide" transparent onRequestClose={handleCancel}>
```

Updated:

```jsx
<Modal visible={visible} animationType="fade" transparent onRequestClose={handleCancel}>
```

This provides a smooth fade-in effect for the overlay instead of sliding from bottom.
</action>
<verify>

- Modal animationType changed to "fade"
- transparent prop still present
- No other changes to Modal component
  </verify>
  <done>
  ClipSelectionModal now fades in smoothly instead of sliding.
  </done>
  </task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Fixed onboarding song access and modal fade animation</what-built>
  <how-to-verify>
Test UAT-002 fix (onboarding song access):
1. Log out or use a new account to reach ProfileSetupScreen
2. Tap "Add a Song" button on the profile setup screen
3. **Verify:** SongSearchScreen opens (no navigation error)
4. Search for and select a song
5. **Verify:** Clip selection modal appears
6. Confirm song selection
7. **Verify:** Returns to ProfileSetupScreen with song saved

Test UAT-001 fix (fade animation):

1. Go to Profile screen (main app)
2. Tap empty song placeholder or long-press existing song
3. Navigate to SongSearch and tap a song result
4. **Verify:** ClipSelectionModal fades in (not slides from bottom)
5. Tap cancel or backdrop
6. **Verify:** Modal fades out smoothly
   </how-to-verify>
   <resume-signal>Type "approved" if both fixes work, or describe remaining issues</resume-signal>
   </task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] UAT-002 fixed: Song search accessible from ProfileSetupScreen
- [ ] UAT-001 fixed: ClipSelectionModal fades in instead of sliding
- [ ] No new errors introduced
- [ ] Both onboarding and main app song flows work
</verification>

<success_criteria>

- All UAT issues from 07.2-01-ISSUES.md addressed
- App builds and runs without errors
- Ready for re-verification
  </success_criteria>

<output>
After completion, create `.planning/phases/07.2-song-modal-stacking/07.2-01-FIX-SUMMARY.md`
</output>
