---
phase: 52-systematic-uat
plan: 10
type: execute
---

<objective>
Run production smoke test — quick re-run of critical paths on production Firebase environment to verify clean environment works.

Purpose: Confirm production Firebase configuration is correct and core functionality works in production before App Store submission.
Output: Production environment validated, critical paths verified, IAP tested with real App Store, final confidence before release.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/52-systematic-uat/52-CONTEXT.md

**Testing device:** Physical iPhone
**Firebase environment:** PRODUCTION (switched via EAS build profile or environment variable)
**Starting state:** Clean production Firebase — no test data, fresh start

**Critical paths to verify:**

1. Auth flow (phone auth with production Firebase Auth)
2. Camera capture and upload (production Storage bucket)
3. Darkroom and reveal cycle (production Firestore)
4. Feed loading (production database)
5. IAP purchase (production App Store, actual purchase)

**What NOT to test:**

- Full feature coverage (already done in Plans 52-01 through 52-09 on dev)
- Edge cases (tested in dev)
- Multi-device flows (tested in dev)

**Production smoke test is quick:** ~30 minutes, not days. Just verify critical paths work.
</context>

<tasks>

<task type="checkpoint:human-action" gate="blocking">
  <action>Build and install production app build</action>
  <instructions>
    **Option 1: EAS Build with production profile**
    1. Run: `eas build --platform ios --profile production` (or whatever production profile is named)
    2. Wait for build to complete (~15-30 minutes)
    3. Install build on iPhone via TestFlight or direct download
    4. Launch app and verify it connects to production Firebase (check Settings → About or similar to see environment)

    **Option 2: Use existing production build**
    If a production build already exists from Phase 51, use that.

    **Verification:**
    - App uses production Firebase project (not dev)
    - App uses production Giphy API key
    - App uses production IAP product IDs

    Check these in app.config.js or eas.json environment variables.

  </instructions>
  <verification>Production build installed and verified to use production Firebase</verification>
  <resume-signal>Type "ready" when production app is installed and environment confirmed</resume-signal>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Production auth flow</what-built>
  <how-to-verify>
    **Step 1: Phone Authentication**
    1. Launch production app
    2. Verify PhoneInputScreen appears
    3. Enter your phone number
    4. Tap "Send Code"
    5. Verify SMS arrives (from production Firebase Auth)
    6. Enter 6-digit code
    7. Verify proceeds to ProfileSetupScreen (new user)
    8. Enter username (use production username, e.g., "yourname")
    9. Enter display name
    10. Choose profile photo
    11. Tap "Continue"

    **Expected:**
    - SMS delivered from production
    - Code accepted
    - Profile setup works
    - Data saved to production Firestore

    **Step 2: Complete Onboarding**
    1. Select 3 content preferences (Selects)
    2. Skip contacts sync (or enable if desired)
    3. Skip notifications permission (or enable)
    4. Verify reaches MainTabs (Feed)

    **Expected:**
    - Onboarding completes smoothly
    - No errors or crashes
    - Production environment stable

  </how-to-verify>
  <resume-signal>Type "approved" if production auth passes, or describe issues</resume-signal>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Production camera, upload, and darkroom</what-built>
  <how-to-verify>
    **Step 1: Capture Photo**
    1. Go to Camera tab
    2. Capture a photo
    3. Verify upload starts and completes
    4. Verify no errors during upload

    **Expected:**
    - Photo uploads to production Storage bucket
    - Upload completes within 10 seconds
    - No upload errors

    **Step 2: Check Darkroom**
    1. Swipe down or tap darkroom icon from camera
    2. Verify developing photo appears
    3. Verify countdown timer shows next reveal time (9am next day in production)

    **Expected:**
    - Photo in darkroom with "developing" state
    - Timer shows correct next reveal time
    - Production Firestore write successful

    **Step 3: Feed Loading**
    1. Go to Feed tab
    2. Verify empty feed state (new production account, no friends yet)
    3. Verify no crashes or errors

    **Expected:**
    - Feed loads (even if empty)
    - Empty state displays correctly
    - No Firestore permission errors

    **Step 4: Profile**
    1. Go to Profile tab
    2. Verify profile displays correctly
    3. Verify Selects banner appears
    4. Verify photo grid empty (or shows captured photo after reveal)

    **Expected:**
    - Profile loads from production Firestore
    - All data intact
    - No permission errors

  </how-to-verify>
  <resume-signal>Type "approved" if production camera/darkroom/feed pass, or describe issues</resume-signal>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Production IAP (real purchase)</what-built>
  <how-to-verify>
    **IMPORTANT:** This will make a REAL purchase using the production App Store. You will be charged the actual price (e.g., $0.99). Only proceed if ready to make a real purchase.

    **Step 1: Navigate to Contributions**
    1. Go to Profile → Settings → Support → Contribute
    2. Verify ContributionsScreen loads
    3. Verify 4 tier buttons appear with production prices

    **Expected:**
    - Screen loads correctly
    - Prices match production IAP products

    **Step 2: Make Purchase**
    1. Tap the $0.99 tier button (or whichever tier you want to purchase)
    2. Verify iOS purchase sheet appears
    3. Verify product name and price correct
    4. Verify it's NOT showing "Sandbox" or test environment
    5. Tap "Buy" and authenticate with Apple ID/Face ID
    6. Wait for purchase to complete
    7. Verify success message appears
    8. Verify color picker appears

    **Expected:**
    - Purchase completes successfully
    - App receives purchase confirmation from App Store
    - Color picker appears immediately
    - Firestore updated with purchase status

    **Step 3: Select Name Color**
    1. In color picker, select a color
    2. Tap "Save"
    3. Verify color applies to username immediately
    4. Go to Profile → verify username colored
    5. Go to Feed (if any photos) → verify username colored

    **Expected:**
    - Color selection saves to production Firestore
    - Name color displays app-wide
    - No errors

    **Step 4: Restore Purchases**
    1. Go back to ContributionsScreen
    2. Tap "Restore Purchases"
    3. Verify shows "Already purchased" or similar
    4. Verify tier buttons show purchased state

    **Expected:**
    - Restore recognizes production purchase
    - UI reflects purchased state

    **If purchase fails:**
    - Check App Store Connect for IAP product configuration
    - Verify IAP products are "Ready to Submit" or "Approved"
    - Verify bundle ID matches production app
    - Note any errors for debugging

  </how-to-verify>
  <resume-signal>Type "approved" if production IAP passes, or describe issues (including any purchase failures)</resume-signal>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Production configuration verification</what-built>
  <how-to-verify>
    **Step 1: Verify App Metadata**
    1. Check app name shows "Flick" (not "Rewind")
    2. Check app icon is new Flick icon (film strip design)
    3. Check splash screen shows "FLICK" text

    **Expected:**
    - All rebrand changes from Phase 51 visible
    - No "Rewind" references

    **Step 2: Verify Legal Documents**
    1. Go to Settings → Legal → Privacy Policy
    2. Verify policy loads and shows "Flick" (not "Rewind")
    3. Go to Legal → Terms of Service
    4. Verify terms load and show "Flick"

    **Expected:**
    - Legal docs updated for production
    - Domain references correct (flickcam.app if applicable)

    **Step 3: Verify Support Infrastructure**
    1. Go to Settings → Support → Contact
    2. Verify support email is support@flickcam.app (or whatever production email is)
    3. Tap email link to verify it opens mail app correctly

    **Expected:**
    - Support email is production address
    - Email link works

    **Step 4: Verify Giphy Attribution**
    1. Go to Feed or any screen with GIFs (if applicable)
    2. Verify Giphy "Powered by GIPHY" attribution visible
    3. Verify uses production Giphy API key

    **Expected:**
    - Attribution present per Giphy requirements
    - Production API key in use (not dev key)

    **Step 5: Performance Check**
    1. Navigate between tabs multiple times
    2. Scroll feed (if populated) or profile
    3. Verify app feels responsive, no lag
    4. Check for any console warnings or errors (if viewable)

    **Expected:**
    - App performs well on production
    - No performance regressions
    - Phase 46 optimizations evident

  </how-to-verify>
  <resume-signal>Type "approved" if production config passes, or describe issues</resume-signal>
</task>

<task type="auto">
  <name>Fix any critical issues found in production smoke test</name>
  <files>Determined by issues found</files>
  <action>If CRITICAL issues found (auth fails, uploads fail, IAP broken, app crashes), investigate immediately. Read Firebase config, eas.json, app.config.js. Check production Firebase console for errors. Fix issues if possible, or escalate to GitHub as blocking issue for release. If minor issues (UI glitch, typo), note them but don't block release.</action>
  <verify>User confirms critical issue is resolved</verify>
  <done>All critical issues fixed or escalated, minor issues documented</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Production build installed and environment verified
- [ ] Phone auth works with production Firebase
- [ ] Photo upload and darkroom work with production Storage/Firestore
- [ ] Feed loads (even if empty) without errors
- [ ] IAP purchase completes successfully with production App Store
- [ ] Name color perk applies after purchase
- [ ] App metadata correct (name, icon, splash)
- [ ] Legal docs updated
- [ ] Support email correct
- [ ] Giphy attribution present
- [ ] Performance acceptable
- [ ] No critical bugs blocking release
</verification>

<success_criteria>

- Production Firebase environment works end-to-end
- Auth, camera, darkroom, feed, IAP all functional
- Real IAP purchase completes and perk applies
- App metadata and legal docs correct for release
- Performance meets expectations
- No critical bugs found
- Ready for App Store submission (Phase 53)
  </success_criteria>

<output>
After completion, create `.planning/phases/52-systematic-uat/52-10-SUMMARY.md`:

# Plan 52-10 Summary: Production Smoke Test

**[One-line summary of test results]**

## Test Results

**Environment:**

- Production build: [PASS/FAIL + build info]
- Firebase environment: [Production confirmed]

**Critical Paths:**

- Phone auth: [PASS/FAIL + notes]
- Camera/upload: [PASS/FAIL + notes]
- Darkroom: [PASS/FAIL + notes]
- Feed: [PASS/FAIL + notes]
- IAP purchase: [PASS/FAIL + notes]

**Configuration:**

- App metadata: [PASS/FAIL + notes]
- Legal docs: [PASS/FAIL + notes]
- Support email: [PASS/FAIL + notes]
- Giphy attribution: [PASS/FAIL + notes]
- Performance: [PASS/FAIL + notes]

## Production Purchase Record

[If IAP tested: "Purchased $0.99 tier successfully. Transaction ID: [if available]. Name color perk applied and verified."]

## Issues Found

**Critical:** [None, or list critical blocking issues]
**Minor:** [None, or list minor non-blocking issues]

## Release Readiness

[READY FOR RELEASE / NOT READY - explain if not ready]

## Next Steps

Phase 52 (Systematic UAT) is complete. All 10 plans executed, dev and production tested.

**Ready for Phase 53:** App Store Release

- Build and submit via EAS
- Pass App Review
- Publish to App Store

---

**UAT Summary:**

- Dev environment: 9 plans (52-01 through 52-09)
- Production environment: 1 plan (52-10)
- Total test coverage: Auth, Profile, Camera, Darkroom, Albums, Selects, Feed, Stories, Social, Notifications, Contributions, IAP, Multi-device
- Issues found and fixed: [count]
- Issues deferred: [count or "None"]
- **Confidence level: HIGH** — App is ready for release.
  </output>
