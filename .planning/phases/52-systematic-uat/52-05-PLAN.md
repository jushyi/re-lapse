---
phase: 52-systematic-uat
plan: 05
type: execute
---

<objective>
Test camera capture, photo upload, darkroom developing, and reveal cycle — the core photo lifecycle that defines Flick's experience.

Purpose: Verify the disposable camera experience works end-to-end: capture → developing → reveal at next 9am.
Output: Camera functionality tested, upload verified, darkroom reveal cycle confirmed, photo deletion/archiving working.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/52-systematic-uat/52-CONTEXT.md

@src/screens/CameraScreen.js
@src/screens/DarkroomScreen.js
@src/screens/PhotoDetailModal.js
@src/hooks/useCamera.js
@src/hooks/useDarkroom.js
@src/services/firebase/photoService.js
@src/services/firebase/darkroomService.js

**Testing device:** Physical iPhone (camera, haptics, real performance)
**Firebase environment:** Dev environment
**Starting state:** Logged in

**Features to test:**

- Camera permissions
- Capture (flash, facing, upload queue)
- Darkroom developing state
- Reveal cycle (9am next day, or shorter in dev)
- Photo deletion and Recently Deleted
- Photo archiving
- Edge cases: rapid capture, offline, upload failure recovery
  </context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Camera capture and upload</what-built>
  <how-to-verify>
    **Step 1: Camera Permissions**
    1. Go to Camera tab
    2. If camera permission not granted, verify permission prompt appears
    3. Grant camera permission
    4. Verify camera preview appears (live feed)

    **Expected:**
    - Permission prompt if needed
    - Camera preview loads smoothly
    - No black screen or stuck state

    **Step 2: Basic Capture**
    1. Tap capture button (large circle at bottom)
    2. Verify haptic feedback
    3. Verify capture animation/flash
    4. Verify photo upload starts (loading indicator or queue counter)
    5. Wait for upload to complete
    6. Verify success indication

    **Expected:**
    - Haptic feedback on capture
    - Photo captured instantly
    - Upload starts immediately
    - Upload completes within 10 seconds (on good connection)

    **Step 3: Flash Toggle**
    1. Tap flash icon (top toolbar)
    2. Verify flash mode cycles (off → on → auto)
    3. Capture photo with flash on
    4. Verify flash fires (if in dim lighting)
    5. Capture photo with flash off
    6. Verify no flash fires

    **Expected:**
    - Flash toggle updates icon
    - Flash mode persists across captures
    - Flash actually fires when enabled

    **Step 4: Camera Facing Toggle**
    1. Tap flip camera icon (top toolbar)
    2. Verify camera switches from back to front (or vice versa)
    3. Capture photo with front camera
    4. Flip back to rear camera
    5. Capture photo with rear camera

    **Expected:**
    - Flip transition is smooth
    - Both cameras work
    - Facing preference persists

    **Step 5: Rapid Capture (Upload Queue)**
    1. Quickly tap capture button 5 times in a row
    2. Verify all 5 photos captured
    3. Verify upload queue indicator shows count (e.g., "5 uploading")
    4. Wait for all uploads to complete
    5. Verify queue clears and all photos in darkroom

    **Expected:**
    - Multiple captures work without hanging
    - Queue manages uploads sequentially or in parallel
    - All photos successfully upload
    - No uploads lost or stuck

  </how-to-verify>
  <resume-signal>Type "approved" if all camera tests pass, or describe issues</resume-signal>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Darkroom developing and reveal cycle</what-built>
  <how-to-verify>
    **Step 1: Access Darkroom**
    1. From Camera screen, swipe down or tap darkroom icon
    2. Verify DarkroomScreen appears
    3. Verify developing photos from previous test appear
    4. Verify countdown timer shows time until next reveal

    **Expected:**
    - Darkroom accessible from camera
    - Developing photos listed
    - Countdown shows reasonable time (9am next day, or shorter in dev)

    **Step 2: Developing Photo Interaction**
    1. Tap a developing photo
    2. Verify photo opens in detail view (blurred or obscured, since not revealed)
    3. Verify "Developing..." indicator or message
    4. Tap back to darkroom
    5. Try swiping between developing photos
    6. Verify swipe navigation works

    **Expected:**
    - Developing photos are obscured (not fully visible)
    - Photo detail modal works
    - Swipe navigation smooth

    **Step 3: Reveal Cycle (Dev Environment)**
    **NOTE:** In dev environment, reveal time is shorter. Check what the actual reveal interval is.

    1. Check current countdown timer
    2. If reveal time is imminent (within a few minutes), wait for it
    3. If reveal time is far off, ask Claude to check if there's a way to trigger reveal manually for testing (or skip this test for now and revisit with multi-device tests)
    4. After reveal time passes, pull to refresh darkroom
    5. Verify photos move from developing to revealed state
    6. Verify push notification received (if notifications enabled)
    7. Tap a revealed photo
    8. Verify photo is now fully visible (not obscured)

    **Expected:**
    - Reveal happens at scheduled time
    - Photos become fully visible
    - Notification sent (if enabled)
    - Darkroom updates automatically or on refresh

    **Alternative (if reveal time too far):**
    We'll defer live reveal testing to multi-device tests and test the reveal logic later.

  </how-to-verify>
  <resume-signal>Type "approved" if darkroom tests pass, or "defer-reveal" if reveal cycle needs testing later</resume-signal>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Photo deletion and archiving</what-built>
  <how-to-verify>
    **Step 1: Delete Photo**
    1. Go to Profile → verify photos appear in grid
    2. Tap a photo to open detail view
    3. Tap menu (three dots) → Delete
    4. Verify confirmation alert appears
    5. Tap "Delete"
    6. Verify photo removed from profile grid
    7. Go to Profile → Settings → Recently Deleted
    8. Verify deleted photo appears in Recently Deleted

    **Expected:**
    - Delete requires confirmation
    - Photo removed from profile immediately
    - Photo moves to Recently Deleted (not permanently deleted)

    **Step 2: Restore from Recently Deleted**
    1. In Recently Deleted screen, tap the deleted photo
    2. Tap "Restore"
    3. Verify photo returns to profile grid
    4. Go back to profile → verify photo is back

    **Expected:**
    - Restore works
    - Photo returns to original location

    **Step 3: Permanent Delete**
    1. Delete the photo again (from profile detail → menu → delete)
    2. Go to Recently Deleted
    3. Tap the photo → tap "Delete Permanently"
    4. Verify final confirmation alert
    5. Tap "Delete Permanently"
    6. Verify photo removed from Recently Deleted
    7. Verify photo NOT in profile grid

    **Expected:**
    - Permanent delete requires extra confirmation
    - Photo fully removed from all locations

    **Step 4: Archive Photo (if feature exists)**
    1. From profile, tap a photo → menu → Archive
    2. Verify photo removed from profile grid
    3. Go to Profile → Archived (or similar)
    4. Verify photo appears in archived section
    5. Unarchive the photo
    6. Verify photo returns to profile grid

    **Expected:**
    - Archive hides photo from main grid
    - Archived photos accessible in separate section
    - Unarchive restores to main grid

    **If archive feature doesn't exist:** Note it and move on.

  </how-to-verify>
  <resume-signal>Type "approved" if deletion/archiving tests pass, or describe issues</resume-signal>
</task>

<task type="auto">
  <name>Fix any issues found during camera/darkroom testing</name>
  <files>Determined by issues found</files>
  <action>If issues found (e.g., upload queue hangs, flash doesn't work, reveal doesn't trigger, delete doesn't move to Recently Deleted), investigate and fix inline. Read camera/darkroom hooks and services, diagnose, fix, have user re-test. Escalate complex issues to GitHub.</action>
  <verify>User confirms issue is resolved</verify>
  <done>All reported issues fixed or escalated</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Camera capture works (flash, facing, upload)
- [ ] Upload queue handles multiple photos
- [ ] Darkroom shows developing photos
- [ ] Reveal cycle tested (or deferred to later plan)
- [ ] Photo deletion → Recently Deleted works
- [ ] Restore from Recently Deleted works
- [ ] Permanent delete works
- [ ] Archive/unarchive works (if feature exists)
- [ ] No crashes or stuck states
</verification>

<success_criteria>

- Camera permissions grant successfully
- Photos capture and upload reliably
- Flash and facing toggles work
- Upload queue manages multiple photos
- Darkroom displays developing photos correctly
- Deletion moves photos to Recently Deleted
- Restore and permanent delete work
- Edge cases handled (rapid capture, queue)
  </success_criteria>

<output>
After completion, create `.planning/phases/52-systematic-uat/52-05-SUMMARY.md`:

# Plan 52-05 Summary: Camera, Photos & Darkroom

**[One-line summary of test results]**

## Test Results

**Camera:**

- Permissions: [PASS/FAIL + notes]
- Capture: [PASS/FAIL + notes]
- Flash toggle: [PASS/FAIL + notes]
- Facing toggle: [PASS/FAIL + notes]
- Upload queue: [PASS/FAIL + notes]

**Darkroom:**

- Access: [PASS/FAIL + notes]
- Developing photos: [PASS/FAIL + notes]
- Countdown timer: [PASS/FAIL + notes]
- Reveal cycle: [PASS/FAIL/DEFERRED + notes]

**Deletion:**

- Delete to Recently Deleted: [PASS/FAIL + notes]
- Restore: [PASS/FAIL + notes]
- Permanent delete: [PASS/FAIL + notes]
- Archive (if exists): [PASS/FAIL/N/A + notes]

## Issues Found

[List any bugs or issues]

## Inline Fixes Applied

[List fixes or "None"]

## Next Step

Ready for 52-06-PLAN.md (Albums & Selects)
</output>
