---
phase: 52-systematic-uat
plan: 07
type: execute
---

<objective>
Test feed loading, story navigation, reactions, comments, and viewed states â€” the core social consumption experience.

Purpose: Verify users can view friends' photos, navigate stories, react, and comment without issues.
Output: Feed functionality tested, stories navigation verified, reactions and comments working, viewed states accurate.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/52-systematic-uat/52-CONTEXT.md

@src/screens/FeedScreen.js
@src/screens/PhotoDetailModal.js
@src/components/FeedPhotoCard.js
@src/components/StoriesBar.js
@src/hooks/useFeedPhotos.js
@src/hooks/useViewedStories.js
@src/services/firebase/feedService.js
@src/services/firebase/commentService.js

**Testing device:** Physical iPhone
**Firebase environment:** Dev environment
**Starting state:** Logged in, have friends with photos (from earlier phases or existing dev data)

**Features to test:**

- Feed loading and pull-to-refresh
- Photo grouping by user
- Story navigation (swipe through friends' photos)
- Reactions (emoji reactions on photos)
- Comments (create, view, reply, delete)
- Comment @mentions (from Phase 47.1)
- Viewed states (track which users' stories seen)
- Edge cases: empty feed, rapid swipe, long comments
  </context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Feed loading and photo viewing</what-built>
  <how-to-verify>
    **Step 1: Feed Loading**
    1. Go to Feed tab
    2. Verify feed loads photos from friends
    3. If empty, note it (will test with multi-device in Plan 52-09)
    4. If photos exist, verify they're grouped by user
    5. Verify each user's photos show in reverse chronological order
    6. Scroll down to load more
    7. Verify infinite scroll or pagination works

    **Expected:**
    - Feed loads within 2 seconds
    - Photos grouped by user correctly
    - Loading indicator appears while fetching
    - Scroll is smooth, no janky performance

    **Step 2: Pull-to-Refresh**
    1. Pull down on feed from top
    2. Verify refresh animation appears
    3. Wait for refresh to complete
    4. Verify feed updates (or stays same if no new content)

    **Expected:**
    - Pull-to-refresh gesture recognized
    - Refresh completes within 2 seconds
    - No duplicate photos appear

    **Step 3: Photo Detail from Feed**
    1. Tap a photo in feed
    2. Verify PhotoDetailModal opens in fullscreen
    3. Verify photo loads at full resolution
    4. Verify photo metadata visible (username, timestamp, location if any)
    5. Swipe left/right to navigate between photos
    6. Verify swipe navigation works within user's photo set
    7. Swipe down to close modal
    8. Verify returns to feed at same scroll position

    **Expected:**
    - Photo detail modal opens smoothly
    - Full resolution image loads quickly
    - Swipe navigation intuitive
    - Closing modal preserves feed scroll position

  </how-to-verify>
  <resume-signal>Type "approved" if feed tests pass, or describe issues</resume-signal>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Story navigation and viewed states</what-built>
  <how-to-verify>
    **Step 1: Stories Bar**
    1. At top of Feed, verify StoriesBar appears (horizontal row of user avatars)
    2. Verify your own story appears first (if you have photos)
    3. Verify friends' stories appear after yours
    4. Verify unviewed stories have indicator (ring, badge, or different style)

    **Expected:**
    - Stories bar loads quickly
    - Own story appears first
    - Friends ordered by recency or friendship
    - Unviewed indicator visible

    **Step 2: View Stories**
    1. Tap a friend's avatar in stories bar
    2. Verify photo modal opens showing friend's first photo
    3. Tap right side of screen (or swipe left) to advance to next photo
    4. Verify advances smoothly
    5. Continue until all photos viewed
    6. Verify auto-advances to next friend's story or closes

    **Expected:**
    - Story tap opens modal immediately
    - Navigation feels like Instagram/Snapchat stories
    - Progress indicator shows which photo in sequence
    - Auto-advance to next user works

    **Step 3: Viewed State Tracking**
    1. After viewing a friend's stories, return to feed
    2. Verify that friend's avatar now shows "viewed" state (no indicator or different style)
    3. Tap a different unviewed story
    4. View all photos
    5. Return to feed
    6. Verify all viewed stories now show viewed state

    **Expected:**
    - Viewed state updates immediately after viewing
    - State persists across app sessions
    - Clear visual distinction between viewed/unviewed

  </how-to-verify>
  <resume-signal>Type "approved" if story tests pass, or describe issues</resume-signal>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Reactions and comments</what-built>
  <how-to-verify>
    **Step 1: Add Reaction**
    1. From feed or photo detail, tap reaction icon (heart, emoji, etc.)
    2. Verify emoji picker appears (or list of reaction options)
    3. Select an emoji (e.g., ðŸ˜‚)
    4. Verify reaction appears on photo immediately
    5. Verify reaction count updates (e.g., "1 reaction")
    6. Tap reaction again to remove
    7. Verify reaction removed, count decrements

    **Expected:**
    - Reaction picker opens quickly
    - Reaction adds/removes instantly
    - Count updates in real-time
    - Only one reaction per user per photo (or multiple, depending on design)

    **Step 2: View Reactions**
    1. Tap reaction count on a photo
    2. Verify list of users who reacted appears
    3. Verify emoji types shown per user
    4. Close reactions list

    **Expected:**
    - Reactions list loads all users
    - Emoji displayed correctly
    - Tapping user navigates to their profile (or just shows name)

    **Step 3: Add Comment**
    1. From photo detail, tap comment icon or comment input field
    2. Type a comment (e.g., "Test comment 123")
    3. Tap "Send" or "Post"
    4. Verify comment appears in comment list immediately
    5. Verify your username and comment text visible
    6. Verify timestamp shows (e.g., "Just now")

    **Expected:**
    - Comment input focuses smoothly
    - Comment posts within 1 second
    - Comment appears in list immediately
    - No duplicate comments

    **Step 4: Reply to Comment**
    1. Tap "Reply" on an existing comment (yours or another user's)
    2. Verify comment input focuses with "Replying to @username"
    3. Type a reply
    4. Post reply
    5. Verify reply appears nested under original comment
    6. Verify reply shows thread connection

    **Expected:**
    - Reply UI indicates replying context
    - Reply nests correctly under parent
    - Thread is clear visually

    **Step 5: Comment @Mentions (from Phase 47.1)**
    1. Start typing a comment
    2. Type "@" followed by a letter
    3. Verify autocomplete suggestions appear (mutual friends only)
    4. Tap a suggestion to insert mention
    5. Finish comment and post
    6. Verify @mention appears as clickable link in comment
    7. Tap @mention
    8. Verify navigates to mentioned user's profile

    **Expected:**
    - Autocomplete appears after "@"
    - Only mutual friends suggested
    - Mention inserts correctly
    - Mention is clickable and navigates

    **Step 6: Delete Comment**
    1. Find one of your own comments
    2. Long-press or tap menu (three dots)
    3. Tap "Delete"
    4. Verify confirmation prompt
    5. Confirm delete
    6. Verify comment removed from list

    **Expected:**
    - Only own comments deletable
    - Deletion requires confirmation
    - Comment removed immediately

    **Step 7: Long Comment Handling**
    1. Type a very long comment (500+ characters)
    2. Post it
    3. Verify comment truncates with "Read more" or scrolls
    4. Tap "Read more" if truncated
    5. Verify full comment appears

    **Expected:**
    - Long comments don't break UI
    - Truncation or scrolling works
    - Full text accessible

  </how-to-verify>
  <resume-signal>Type "approved" if reaction/comment tests pass, or describe issues</resume-signal>
</task>

<task type="auto">
  <name>Fix any issues found during feed/stories/comments testing</name>
  <files>Determined by issues found</files>
  <action>If issues found (e.g., feed doesn't load, stories crash, reactions don't save, comments duplicate, @mentions broken), investigate and fix inline. Read feed/comment services and hooks, diagnose, fix, have user re-test. Escalate complex issues to GitHub.</action>
  <verify>User confirms issue is resolved</verify>
  <done>All reported issues fixed or escalated</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Feed loads and refreshes correctly
- [ ] Photos grouped by user
- [ ] Photo detail modal works
- [ ] Stories bar shows unviewed indicators
- [ ] Story navigation (swipe) works
- [ ] Viewed state tracking accurate
- [ ] Reactions add/remove correctly
- [ ] Comments post and display
- [ ] Comment replies nest correctly
- [ ] @Mentions autocomplete and link
- [ ] Comment deletion works
- [ ] Long comments handled gracefully
- [ ] No crashes or performance issues
</verification>

<success_criteria>

- Feed displays friends' photos correctly
- Pull-to-refresh works without duplicates
- Story navigation smooth and intuitive
- Viewed state tracking accurate
- Reactions add/remove instantly
- Comments and replies post correctly
- @Mentions autocomplete and navigate
- Long comments truncate or scroll
- Edge cases handled (empty feed, rapid swipe)
  </success_criteria>

<output>
After completion, create `.planning/phases/52-systematic-uat/52-07-SUMMARY.md`:

# Plan 52-07 Summary: Feed & Stories

**[One-line summary of test results]**

## Test Results

**Feed:**

- Loading: [PASS/FAIL + notes]
- Pull-to-refresh: [PASS/FAIL + notes]
- Photo detail: [PASS/FAIL + notes]
- Grouping: [PASS/FAIL + notes]

**Stories:**

- Stories bar: [PASS/FAIL + notes]
- Navigation: [PASS/FAIL + notes]
- Viewed states: [PASS/FAIL + notes]

**Reactions:**

- Add/remove: [PASS/FAIL + notes]
- View list: [PASS/FAIL + notes]

**Comments:**

- Add comment: [PASS/FAIL + notes]
- Reply: [PASS/FAIL + notes]
- @Mentions: [PASS/FAIL + notes]
- Delete: [PASS/FAIL + notes]
- Long comments: [PASS/FAIL + notes]

## Issues Found

[List any bugs or issues]

## Inline Fixes Applied

[List fixes or "None"]

## Next Step

Ready for 52-08-PLAN.md (Social Features - Single Device)
</output>
