---
phase: 08.1-grid-header-safe-area
plan: 01
type: execute
---

<objective>
Fix album grid view and photo picker screens showing photos behind status bar when scrolling.

Purpose: Both screens have headers that don't properly cover the safe area, causing photos to be visible behind the iOS status bar/notch when users scroll.
Output: Both screens have black safe area coverage preventing content from appearing behind status indicators.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**Prior decisions (from STATE.md):**

- Phase 5: "useSafeAreaInsets for header positioning" - Better control than SafeAreaView for absolute positioned headers
- Phase 6: "useSafeAreaInsets for modal safe area handling" - SafeAreaView edges prop unreliable on first render

**Source files:**
@src/screens/AlbumGridScreen.js
@src/screens/AlbumPhotoPickerScreen.js

**Issue details:**

1. AlbumGridScreen: Header positioned absolutely at `top: insets.top`, leaving y=0 to y=insets.top unprotected
2. AlbumPhotoPickerScreen: Header in flow with `paddingTop: insets.top` but no explicit backgroundColor
3. When scrolling, photos visible through the unprotected safe area above headers
   </context>

<tasks>

<task type="auto">
  <name>Task 1: Fix AlbumGridScreen safe area coverage</name>
  <files>src/screens/AlbumGridScreen.js</files>
  <action>
Add a status bar background View that covers the safe area gap. Two changes needed:

1. Add a new View positioned absolutely at top=0, left=0, right=0 with height=insets.top and backgroundColor=colors.background.primary. This covers the gap between screen top and where the header starts.

2. Give this view zIndex: 10 (same as header) to ensure it stays above scrolling content.

Pattern to add after the container View opens:

```jsx
{
  /* Safe area background */
}
<View style={[styles.safeAreaBackground, { height: insets.top }]} />;
```

Add corresponding style:

```javascript
safeAreaBackground: {
  position: 'absolute',
  top: 0,
  left: 0,
  right: 0,
  zIndex: 10,
  backgroundColor: colors.background.primary,
},
```

Do NOT change header positioning logic - the safe area cover is a simpler, additive fix.
</action>
<verify>

1. Open app and navigate to an album grid view
2. Scroll the photo grid upward aggressively
3. Photos should NOT be visible behind the iOS status bar indicators
4. Header should remain visually consistent during scroll
   </verify>
   <done>Safe area gap is covered with black background, no photos visible behind status bar when scrolling</done>
   </task>

<task type="auto">
  <name>Task 2: Fix AlbumPhotoPickerScreen safe area coverage</name>
  <files>src/screens/AlbumPhotoPickerScreen.js</files>
  <action>
Add explicit background color and safe area coverage to the header. Two changes needed:

1. Add backgroundColor to header style:

```javascript
header: {
  backgroundColor: colors.background.primary, // ADD THIS
  flexDirection: 'row',
  // ... rest unchanged
},
```

2. The header already has `paddingTop: insets.top` which extends the header element from y=0. Adding backgroundColor ensures the header visually covers the safe area.

3. Verify the FlatList doesn't need any additional clipping - it should respect the natural document flow below the header.

Alternative if header bg alone doesn't fix: Add same safeAreaBackground pattern as AlbumGridScreen if the flow layout doesn't naturally protect the safe area.
</action>
<verify>

1. Open app and navigate to Create Album â†’ Photo Picker
2. Scroll the photo grid upward aggressively
3. Photos should NOT be visible behind the iOS status bar indicators
4. Header should remain visually solid during scroll
   </verify>
   <done>Header has explicit background covering safe area, no photos visible behind status bar when scrolling</done>
   </task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] AlbumGridScreen: Scroll aggressively, no content behind status bar
- [ ] AlbumPhotoPickerScreen: Scroll aggressively, no content behind status bar
- [ ] Both screens maintain visual consistency during normal use
- [ ] No TypeScript/ESLint errors introduced
</verification>

<success_criteria>

- Both screens have safe area properly covered with black background
- No photos visible behind iOS status bar/notch when scrolling
- No regressions in existing header functionality
- All verification checks pass
  </success_criteria>

<output>
After completion, create `.planning/phases/08.1-grid-header-safe-area/08.1-01-SUMMARY.md`:

# Phase 8.1 Plan 01: Grid Header Safe Area Fix Summary

**[One-liner describing the fix]**

## Accomplishments

- Fixed AlbumGridScreen safe area gap
- Fixed AlbumPhotoPickerScreen header background

## Files Modified

- `src/screens/AlbumGridScreen.js` - Added safe area background cover
- `src/screens/AlbumPhotoPickerScreen.js` - Added explicit header background

## Decisions Made

[Any approach decisions made during implementation]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Phase Readiness

Phase 8.1 complete, ready for Phase 9: Monthly Albums
</output>
